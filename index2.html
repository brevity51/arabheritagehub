<!DOCTYPE html>
<html lang="en" id="html" x-data="global()" class="h-full js-focus-visible">

<head>
    <meta charset="utf-8">

    <!--             
                    *******,******,            
                .,,,.******,**********.        
              ,,,,,,,,*****,************,      
            .,,,,,,,,,,****,**************.    
           ,,,,,,,,,,,,****,***************.   
          ,.,,,,,,,,,,,,,**,****************,        ____    __                                ____        ___    ___    
         */////,.,,,,,,,,**,*****************       /\  _`\ /\ \__                            /\  _`\     /\_ \  /\_ \    
         //////////*,,,,,.*,*****************.      \ \,\L\_\ \ ,_\  _ __    __     __  __  __\ \ \L\ \___\//\ \ \//\ \    
         ///////////////*..,*****************,       \/_\__ \\ \ \/ /\`'__\/'__`\  /\ \/\ \/\ \\ \ ,__/ __`\\ \ \  \ \ \   
         /////////////////,*,,***************,         /\ \L\ \ \ \_\ \ \//\ \L\.\_\ \ \_/ \_/ \\ \ \/\ \L\ \\_\ \_ \_\ \_ 
         ///////////////,******,,************.         \ `\____\ \__\\ \_\\ \__/.\_\\ \___x___/' \ \_\ \____//\____\/\____\ 
         *///////////*,***********,**********           \/_____/\/__/ \/_/ \/__/\/_/ \/__//__/    \/_/\/___/ \/____/\/____/
          *////////*,****************,******,  
           //////*,********************,,**.   
            ,//***************************.    
              ,*************************,      
                .*********************.        
                   .,***********/*, 
        -->

    <title>Arabs Got Talent Season 7 - StrawPoll</title>


    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="robots" content="noindex, follow" />
    <meta name="robots" content="indexifembedded" />


    <link rel="stylesheet" href="https://cdn.strawpoll.com/dist/main.css?v=248">

    <link rel="stylesheet" href="https://cdn.strawpoll.com/dist/custom.Q0Zp7VrbAgM.css?v=248">

    <script defer src="https://cdn.strawpoll.com/dist/app.js?v=248"></script>

    <script defer data-domain="strawpoll.com" src="https://log.strawpoll.com/js/script.js"></script>


    <script defer src="https://cdn.strawpoll.com/dist/sortable.js?v=248"></script>


    <meta name="twitter:card" content="summary_large_image" />
    <meta property="fb:app_id" content="567582844767504" />

    <meta property="og:site_name" content="StrawPoll" />
    <meta property="og:title" content="Arabs Got Talent Season 7 - StrawPoll" />
    <meta property="og:description"
        content="Cast your votes for the most talented stars in the Arabs Got Talent Season 7! Support your favorite acts in categories like singing, dancing, comedy, magic, and more." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://strawpoll.com/Q0Zp7VrbAgM" />
    <meta property="og:image" content="https://cdn.strawpoll.com/images/polls/previews/Q0Zp7VrbAgM-c.png" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en" />



    <meta name="apple-mobile-web-app-title" content="StrawPoll" />
    <meta name="application-name" content="StrawPoll" />

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">



    <style>
        [x-cloak] {
            display: none;
        }
    </style>

    <script>
        const TIMESTAMP = new Date().getTime()
        const WEBSOCKET_URL = 'wss://ws.strawpoll.com'
        const API_ENDPOINT = 'https://api.strawpoll.com/v3'
        const STATIC_URL = 'https://cdn.strawpoll.com'
        const DEVICE_TYPE = 'desktop'
        const APP_VERSION = '248'

        const L = {
            'error_retry': 'An error occurred. Please reload the page and try again.',
            'timeout_retry': 'Timeout, please try again.',
            'already_voted': 'You already voted on this poll.',
            'incognito_vote': 'Voting in incognito mode is not allowed. Please disable incognito mode and try again.',
            'backend_error': 'Backend error.',
            'request_failed': 'Request failed.',
            'request_help': 'Please contact support@strawpoll.com for help.',
            'day': 'day',
            'days': 'days',
            'hour': 'hour',
            'hours': 'hours',
            'minute': 'minute',
            'minutes': 'minutes',
            'second': 'second',
            'seconds': 'seconds',
        }

        const APPEARANCE = 'auto'
    </script>




    <script>
        let defaultThemeLight = { 'id': null, 'name': 'Default', colors: { 'pageBg': '#f9fafb', 'boxBg': '#ffffff', 'boxBorder': '#e5e8eb', 'boxBorderTop': '#fbbf24', 'title': '#111827', 'text': '#6b7280', 'highlight': '#4f46e5', 'buttonBg': '#4f46e5', 'buttonText': '#ffffff', 'border': '#e5e7eb', }, 'hideShareButton': false }
        let defaultThemeDark = { 'id': null, 'name': 'Default', colors: { 'pageBg': '#111827', 'boxBg': '#1f2937', 'boxBorder': '#374151', 'boxBorderTop': '#818cf8', 'title': '#e5e7eb', 'text': '#94a3b8', 'highlight': '#6366f1', 'buttonBg': '#6366f1', 'buttonText': '#ffffff', 'border': '#374151' }, 'hideShareButton': false }


        let customTheme = { id: null }

        let currentTheme = defaultThemeLight

        if (APPEARANCE === 'dark' || APPEARANCE === 'auto' && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.getElementById('html').classList.add('dark')
            currentTheme = defaultThemeDark
        }


        if (customTheme.id) {
            currentTheme = customTheme

            if (isDarkBg(hexToRGBA(customTheme.colors.pageBg, 1, 0, 1))) {
                if (!document.getElementById('html').classList.contains('dark')) {
                    document.getElementById('html').classList.add('dark')
                }
            } else {
                if (document.getElementById('html').classList.contains('dark')) {
                    document.getElementById('html').classList.remove('dark')
                }
            }
        }

        let pollOptionColors = ['#3EB991', '#FF7563', '#AA66CC', '#FFBB33', '#FF8800', '#33B5E5', '#AA66CC']

        setCustomTheme(currentTheme)

        function setCustomTheme(theme) {
            for (const [key, value] of Object.entries(theme.colors)) {
                document.documentElement.style.setProperty('--' + key, hexToRGBA(value, 1, 0, 1))
            }

            document.documentElement.style.setProperty('--buttonBgLight', hexToRGBA(theme.colors['buttonBg'], 1, 1, 1.16))
            document.documentElement.style.setProperty('--borderDark', hexToRGBA(theme.colors['border'], 1, 1, 0.84))
            document.documentElement.style.setProperty('--highlightDark', hexToRGBA(theme.colors['highlight'], 1, 1, 0.84))
            document.documentElement.style.setProperty('--textShadow', hexToRGBA(theme.colors['text'], 1, 5, 0.954))
            document.documentElement.style.setProperty('--textLight', hexToRGBA(theme.colors['text'], 0.8, 0, 1)) // 1, 113, 0.5568)
            document.documentElement.style.setProperty('--textLighter', hexToRGBA(theme.colors['text'], 1, 168, 0.3431))
            document.documentElement.style.setProperty('--highlightShadow', hexToRGBA(theme.colors['highlight'], 1, 58, 0.772))
        }

        function setCustomFormDesign(design) {
            for (const [key, value] of Object.entries(design.colors)) {
                document.documentElement.style.setProperty('--' + key, hexToRGBA(value, 1, 0, 1))
            }

            if (isDarkBg(hexToRGBA(design.colors['formBackgroundColor'], 1, 0, 1))) {
                document.documentElement.style.setProperty('--textColorLight', hexToRGBA(design.colors['textColor'], 1, 1, 0.5))
                document.documentElement.style.setProperty('--titleColorLight', hexToRGBA(design.colors['titleColor'], 1, 1, 0.5))
            } else {
                document.documentElement.style.setProperty('--titleColorLight', hexToRGBA(design.colors['titleColor'], 0.2, 0, 1))
                document.documentElement.style.setProperty('--textColorLight', hexToRGBA(design.colors['textColor'], 0.2, 0, 1))
            }

            document.documentElement.style.setProperty('--titleColorLight', hexToRGBA(design.colors['titleColor'], 0.2, 0, 1))
            document.documentElement.style.setProperty('--primaryColorLight', hexToRGBA(design.colors['primaryColor'], 0.6, 0, 1))
            document.documentElement.style.setProperty('--primaryColorLightest', hexToRGBA(design.colors['primaryColor'], 0.1, 0, 1))
            document.documentElement.style.setProperty('--choiceColorLight', hexToRGBA(design.colors['choiceColor'], 0.6, 0, 1))
            document.documentElement.style.setProperty('--choiceColorLighter', hexToRGBA(design.colors['choiceColor'], 0.3, 0, 1))
            document.documentElement.style.setProperty('--choiceColorLightest', hexToRGBA(design.colors['choiceColor'], 0.1, 0, 1))
            document.documentElement.style.setProperty('--buttonBackgroundColorLight', hexToRGBA(design.colors['buttonBackgroundColor'], 0.6, 0, 1))

            if (isDarkBg(hexToRGBA(design.colors['choiceColor'], 1, 0, 1))) {
                document.documentElement.style.setProperty('--choiceBackgroundTextColor', 'rgba(255,255,255,1)')
            } else {
                document.documentElement.style.setProperty('--choiceBackgroundTextColor', 'rgba(0,0,0,1)')
            }
        }

        function hexToRGBA(hex, opacity, modifierAdd, modifierMulti) {
            if (!hex) {
                return 'rgba(0, 0, 0, 0)'
            }
            let c;
            if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
                c = hex.substring(1).split('')
                if (c.length === 3) {
                    c = [c[0], c[0], c[1], c[1], c[2], c[2]]
                }
                c = '0x' + c.join('')
                return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].map(x => parseInt(modifierAdd + modifierMulti * x)).join(',') + ', ' + opacity + ')'
            }
        }

        function isDarkBg(color) {
            let colors = color.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)

            let r = colors[1]
            let g = colors[2]
            let b = colors[3]
            let a = parseInt(colors[4])

            if (a === 0) return 0

            let hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b))

            if (hsp <= 127.5) {
                return 1
            }
        }
    </script>






    <style>
        /* THEME */
        :root {
            /* --backgroundColor: rgba(240, 240, 240, 1);
				--questionBackgroundColor: rgba(255, 255, 255, 1);
				--titleColor: rgba(0, 0, 0, 1);
				--titleColorLight: rgba(150, 150, 150, 1);
				--textColor: rgba(100, 100, 100, 1);
				--textColorLight: rgba(200, 200, 200, 1);
				--answerColor: rgba(255, 0, 255, 1);
				--primaryColor: rgba(0, 0, 255, 1); */

            /* dark mode */
            --formBackgroundColor: rgba(17, 24, 39);
            --questionBackgroundColor: rgba(31, 41, 55, 1);
            --questionTitleColor: rgba(255, 255, 255, 1);
            --questionTitleColorLight: rgba(150, 150, 150, 1);
            --questionTextColor: rgba(100, 100, 100, 1);
            --questionTextColorLight: rgba(200, 200, 200, 1);
            --questionChoiceColor: rgba(255, 0, 255, 1);
            --questionChoiceColorLight: rgba(255, 0, 255, 1);
            --questionChoiceColorLightest: rgba(255, 0, 255, 1);
            --formPrimaryColor: rgba(0, 0, 255, 1);

            --formBorderColor: rgba(55, 65, 81, 1);
            --formBorderTopColor: rgba(129, 140, 248, 1);
        }

        .form-background {
            background-color: var(--formBackgroundColor);
        }

        .form-question-wrapper {
            background-color: var(--questionBackgroundColor);
        }

        .form-question {
            background-color: var(--questionBackgroundColor);
        }

        .question-top-border {
            border-top-color: var(--formBorderTopColor);
        }

        .question-title,
        .question-title::placeholder,
        .question-title input {
            color: var(--questionTitleColor);
        }

        /* .question-title::placeholder {
				color: var(--titleColorLight);
			} */
        .question-text,
        .question-text::placeholder {
            color: var(--questionTextColor);
        }

        /* .question-text::placeholder {
				color: var(--textColorLight);
			} */
        .field-choice-input,
        .field-choice-input::placeholder {
            color: var(--questionChoiceColor);
        }

        /* .field-choice-input::placeholder {
				color: var(--answerColorLight);
			} */
        .question-title:hover,
        .question-text:hover,
        .field-choice-input:hover {
            border-color: var(--questionTextColorLight);
        }

        .question-title:focus,
        .question-text:focus,
        .field-choice-input:focus {
            border-color: var(--formPrimaryColor);
        }

        .field-choice-card {
            color: var(--questionChoiceColor);
            border-color: var(--questionChoiceColorLight);
            background-color: var(--questionChoiceColorLightest);
        }

        .form .field-choice-card:hover {
            background-color: var(--questionChoiceColorLighter);
        }

        .choice-symbol {
            border-color: var(--questionChoiceColorLight);
            background-color: var(--questionBackgroundColor);
        }

        .primary-link {
            color: var(--formPrimaryColor);
        }

        /* layout: plain, card, image_top, image_left, image_right, transparent */
        /* background_image */
        /* logo_image */
        /* colors: page_bg, question_bg, title, questions, answers, primary (highlight), secondary */
        /* font */
        /* text size */
        /* align: left, center, right */
        /* ltr? */
    </style>


    <!-- Add this line in the <head> section of your HTML -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/index.js"></script>

    <link rel="stylesheet" href="css/index.css">
    <script>

    </script>

    <style>
        /* Popup styles */
        .popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            display: none;
            z-index: 999;
            /* Lower z-index */
        }

        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 998;
            /* Lower z-index for the overlay */
        }

        .popup img {
            border-radius: 50%;
            margin-right: 10px;
            width: 40px;
            height: 40px;
        }
    </style>
</head>

<body class="font-sans antialiased min-h-full flex flex-col text-default bg-transparent">



    <div class="flex-auto  ">



        <div @update-poll.window="$store.poll.update($event.detail.poll); $dispatch('refresh-results')"
            @delete-poll.window="setTimeout(() => { window.location.reload() }, 1500)"
            class="strawpoll-container embed py-0" id="strawpoll_box_Q0Zp7VrbAgM">


            <template x-if="$store.poll.pinCode">
                <div x-data="{ open: true }"
                    class="bg-indigo-600 dark:bg-indigo-500 dark:bg-opacity-20 rounded-md mb-8 max-w-3xl mx-auto"
                    x-show="open">
                    <div class="max-w-7xl mx-auto py-3 px-4">
                        <div class="flex items-center justify-between flex-wrap">
                            <div class="w-0 flex-1 flex items-center">
                                <span class="flex p-2 rounded-lg bg-indigo-800 dark:bg-indigo-600">


                                    <svg class="h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />

                                    </svg>

                                </span>
                                <p class="ml-3 text-lg font-medium text-white">
                                    <span>
                                        Go to <a class="font-extrabold hover:underline" href="https://strawpoll.live/"
                                            target="_blank">strawpoll.live</a> and use the code <span
                                            class="font-extrabold tracking-widest" x-text="$store.poll.pinCode"></span>
                                    </span>
                                </p>
                            </div>
                            <div class="order-2 flex-shrink-0 sm:order-3 sm:ml-3">
                                <button type="button"
                                    class="-mr-1 flex p-2 rounded-md hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-white sm:-mr-2"
                                    @click="open = false">
                                    <span class="sr-only">
                                        Dismiss
                                    </span>
                                    <!-- Heroicon name: outline/x -->
                                    <svg class="h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </template>





            <div class="space-y-8 ">
                <div class="strawpoll-box custom-box custom-box-primary overflow-visible mx-auto max-w-full"
                    :class="{ 'max-w-full': !expandBox, 'max-w-full': expandBox }">
                    <div class="space-y-8 mb-8 pt-4 px-4 sm:px-6 sm:pt-6">


                        <div x-data="{ poll: Alpine.store(&#39;poll&#39;), i: 0,  }" class="flex justify-between">
                            <div class="flex-grow flex flex-col">
                                <h1 class="strawpoll-title text-2xl text-gray-900 dark:text-gray-200 font-semibold custom-title break-words"
                                    x-text="poll.title">
                                    Arabs Got Talent Season 7
                                </h1>
                            </div>

                            <div class="flex items-top space-x-3">
                            </div>
                        </div>



                        <div x-data="{ poll: Alpine.store(&#39;poll&#39;), i: 0,  }">
                            <template x-if="poll.pollMeta.location">
                                <div class="flex">
                                    <div class="text-gray-500 custom-text mr-3">


                                        <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />

                                        </svg>

                                    </div>
                                    <div class="text-gray-500 custom-text">
                                        <span x-text="poll.pollMeta.location"
                                            class="whitespace-pre-line break-words"></span>
                                    </div>
                                </div>
                            </template>
                        </div>


                        <div x-data="{ poll: Alpine.store(&#39;poll&#39;), i: 0,  }">
                            <template x-if="poll.pollMeta.description">
                                <div class="flex">
                                    <div class="text-gray-500 custom-text mr-3">


                                        <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z" />

                                        </svg>

                                    </div>
                                    <div class="text-gray-500 custom-text ">
                                        <span x-text="poll.pollMeta.description"
                                            class="whitespace-pre-line break-words"></span>
                                    </div>
                                </div>
                            </template>
                        </div>


                        <div x-data="{ poll: Alpine.store(&#39;poll&#39;), i: 0,  }">
                            <template x-if="poll.media">
                                <div class="flex justify-center px-0 sm:px-20">
                                    <img :src="STATIC_URL + poll.media.path" alt="Poll image" />
                                </div>
                            </template>
                        </div>

                    </div>


                    <form x-data="pollVote()" class="strawpoll-form px-4 sm:px-6" method="POST" action="/vote"
                        @submit.prevent="votePoll()">


                        <div class="space-y-8 pb-4 sm:pb-6" style="min-width: 168px; ">

                            <div x-data="rankingVote()">

                                <div class="text-gray-500 custom-text">
                                    <span
                                        x-show="$store.poll.pollConfig.layout === 'grid' || $store.poll.pollConfig.layout === 'default' && !isMobileView">Cast
                                        your ranked-choice vote on the interactive grid below.</span>
                                    <span
                                        x-show="$store.poll.pollConfig.layout === 'drag' || $store.poll.pollConfig.layout === 'default' && isMobileView">
                                        Drag your preferred option to the top.
                                    </span>
                                </div>

                                <div class="mt-4 text-lg sm:text-base" style="min-width: 168px;">
                                    <div id="poll_options" class="fix-drag-hover mx-auto sm:max-w-full"
                                        style="max-width: 80%;" x-data="dragOptions()">
                                        <template x-for="(option, i) in initialOptions" :key="option.id">
                                            <div :data-id="option.id" :data-value="option.value"
                                                class="drag-item flex items-center justify-between mt-3 rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-700 px-4 py-3 cursor-grab">
                                                <div
                                                    class="flex flex-grow items-center space-x-3  border-r custom-border pr-3">
                                                    <span
                                                        class="rounded-full w-8 h-8 flex items-center justify-center custom-field-input border custom-border shrink-0 mr-1"
                                                        x-text="currentPosition[option.id]"></span>
                                                    <span x-html="parseMarkDown(option.value)"></span>
                                                </div>
                                                <div class="ml-3">
                                                    <span x-text="currentPoints[option.id]"></span>
                                                </div>
                                            </div>
                                        </template>
                                    </div>

                                    <script>
                                        function parseMarkDown(text) {
                                            text = text
                                                .replace(/&/g, "&amp;")
                                                .replace(/</g, "&lt;")
                                                .replace(/>/g, "&gt;")
                                                .replace(/"/g, "&quot;")
                                                .replace(/'/g, "&#039;")

                                            var bold = /\*\*(.*?)\*\*/gm
                                            var html = text.replace(bold, '<strong>$1</strong>');
                                            return html
                                        }

                                        function dragOptions() {
                                            return {
                                                option: { value: '###' }, // used for Sortable fallback
                                                currentPosition: {},
                                                currentPoints: {},
                                                maxPoints: 0,
                                                init() {
                                                    this.$watch('checkedOptions', value => {
                                                        this.updateSelectedOptions(value)
                                                    })

                                                    this.checkedOptions = JSON.parse(JSON.stringify(this.initialOptions))

                                                    this.waitForSortable()
                                                },
                                                updateSelectedOptions(value) {
                                                    this.selectedOptions = value.map((option, index) => ({ id: option.id, value: index + 1 }))
                                                    this.maxPoints = this.$store.poll.pollConfig.maxPoints
                                                    if (!this.maxPoints) this.maxPoints = this.selectedOptions.length - 1
                                                    this.selectedOptions.forEach((option, index) => {
                                                        this.currentPoints[option.id] = this.maxPoints - index
                                                        if (this.currentPoints[option.id] < 0) this.currentPoints[option.id] = 0
                                                        this.currentPosition[option.id] = index + 1
                                                    })
                                                },
                                                waitForSortable() {
                                                    if (window.Sortable) {
                                                        this.initSortable()
                                                    } else {
                                                        const self = this
                                                        setTimeout(function () { self.waitForSortable() }, 100)
                                                    }
                                                },
                                                initSortable() {
                                                    let self = this
                                                    let el = document.getElementById('poll_options');
                                                    let sortable = Sortable.create(el, {
                                                        animation: 150,
                                                        ghostClass: 'drag-ghost',
                                                        onChoose: function (event) {
                                                            self.option = { id: event.item.dataset.id, value: event.item.dataset.value }
                                                        },
                                                        onStart: function () {
                                                            this.el.classList.remove('fix-drag-hover');
                                                        },
                                                        onEnd: function () {
                                                            this.el.classList.add('fix-drag-hover');
                                                        },
                                                        onUpdate: (event) => {
                                                            const element = this.checkedOptions.splice(event.oldIndex, 1)
                                                            this.checkedOptions.splice(event.newIndex, 0, element[0])
                                                        }
                                                    });
                                                },
                                            }
                                        }

                                    </script>

                                </div>

                                <div class="mt-8">
                                    <div x-data="{ poll: Alpine.store(&#39;poll&#39;), }">
                                        <template x-if="poll.pollConfig.deadlineAt">
                                            <div class="rounded-md bg-blue-50 dark:bg-blue-500 dark:bg-opacity-20 p-4">
                                                <div class="flex">
                                                    <div class="flex-shrink-0">
                                                        <svg xmlns="http://www.w3.org/2000/svg"
                                                            class="h-5 w-5 text-blue-400" fill="none"
                                                            viewBox="0 0 24 24" stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                stroke-width="2"
                                                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                                        </svg>
                                                    </div>
                                                    <div class="ml-3 flex-1 md:flex md:justify-between">
                                                        <p class="text-sm text-blue-700 dark:text-gray-300">
                                                            <template
                                                                x-if="poll.pollConfig.deadlineAt * 1000 >= new Date().getTime()">
                                                                <span
                                                                    x-text="strawpoll.placeholder('Voting ends in {date}.', { date: timeago.format(poll.pollConfig.deadlineAt * 1000, 'en') })"></span>
                                                            </template>
                                                            <template
                                                                x-if="poll.pollConfig.deadlineAt * 1000 < new Date().getTime()">
                                                                <span
                                                                    x-text="strawpoll.placeholder('Voting closed {date} ago.', { date: timeago.format(poll.pollConfig.deadlineAt * 1000, 'en') })""></span>
						</template>
					</p>
				</div>
			</div>
		</div>
	</template>
</div>

	</div>
	
	<div class=" mt-8 poll-input" x-show="$store.poll.pollConfig.requireVoterNames" x-cloak>


                                                                    <div>
                                                                        <div class="flex justify-between">
                                                                            <label for="name"
                                                                                class="label custom-title">
                                                                                Name <span
                                                                                    class="text-gray-500 custom-text-light">(Required)</span>
                                                                            </label>
                                                                        </div>
                                                                        <div class="mt-1 relative flex items-center">
                                                                            <input type="text" name="name" id="name"
                                                                                class="input custom-field-input custom-focus-ring-0"
                                                                                placeholder="Enter your name"
                                                                                x-model="voteData.name"
                                                                                x-ref="participantNameInput">
                                                                        </div>
                                                                    </div>

                                                    </div>

                                                    <div class="mt-8 poll-input"
                                                        x-show="$store.poll.pollConfig.duplicationChecking === 'token'"
                                                        x-cloak>
                                                        <div>
                                                            <div class="flex justify-between items-center">
                                                                <label for="token" class="label custom-text">
                                                                    Unique code <span
                                                                        class="text-gray-500 custom-text-light">(Required)</span>
                                                                </label>
                                                                <a href="/help/how-to-obtain-vote-token/"
                                                                    target="_blank"
                                                                    class="flex items-center link custom-highlight space-x-1">


                                                                    <svg class="h-5 w-5 "
                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                        fill="currentColor" viewBox="0 0 20 20"
                                                                        stroke="">
                                                                        <path fill-rule="evenodd"
                                                                            d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z"
                                                                            clip-rule="evenodd" />

                                                                    </svg>

                                                                    <span>What&#39;s this?</span>
                                                                </a>
                                                            </div>
                                                            <div class="mt-1 relative">
                                                                <input type="text" name="token" id="token"
                                                                    class="input custom-field-input custom-text custom-focus-ring-0"
                                                                    placeholder="Enter your unique voting code"
                                                                    x-model="voteData.token"
                                                                    @input.debounce="checkUniqueCode()">
                                                            </div>
                                                        </div>

                                                    </div>

                                                    <template x-if="hasLocalVote">
                                                        <div class="mt-8 custom-text">
                                                            Update your vote or <button type="button"
                                                                @click="hasLocalVote = false; selectedOptions = []; voteData = { id: null, pollVotes: [], otherOption: { value: null, voteValue: 0 }, token: null, voteType: 'add' }; $dispatch('update-checked-options'); $dispatch('add-participant')"
                                                                class="link custom-input-highlight-text">add a new
                                                                vote</button>.
                                                        </div>
                                                    </template>

                                                </div>

                                                <script>
                                                    function rankingVote() {
                                                        return {
                                                            initialOptions: [],
                                                            checkedOptions: [],
                                                            init() {
                                                                this.initialOptions = JSON.parse(JSON.stringify(this.$store.poll.pollOptions))
                                                                if (this.$store.poll.pollConfig.randomizeOptions) {
                                                                    this.fisherYatesShuffle(this.initialOptions)
                                                                }
                                                            },
                                                            fisherYatesShuffle(array) {
                                                                for (var i = array.length - 1; i > 0; i--) {
                                                                    var j = Math.floor(Math.random() * (i + 1));
                                                                    [array[i], array[j]] = [array[j], array[i]];
                                                                }
                                                            }
                                                        }
                                                    }
                                                </script>



                                                <div class="" x-data="{ poll: Alpine.store(&#39;poll&#39;), }">
                                                    <template x-if="poll.pollConfig.deadlineAt">
                                                        <div class="custom-text">
                                                            <template
                                                                x-if="poll.pollConfig.deadlineAt * 1000 >= new Date().getTime()">
                                                                <span
                                                                    x-text="strawpoll.placeholder('Voting ends in {date}.', { date: strawpoll.secondsToTime(poll.pollConfig.deadlineAt - new Date().getTime() / 1000) })"></span>
                                                            </template>
                                                            <template
                                                                x-if="poll.pollConfig.deadlineAt * 1000 < new Date().getTime()">
                                                                <span
                                                                    x-text="strawpoll.placeholder('Voting closed {date} ago.', { date: strawpoll.secondsToTime(new Date().getTime() / 1000 - poll.pollConfig.deadlineAt) })"></span>
                                                            </template>
                                                        </div>
                                                    </template>
                                                </div>




                                                <div x-show="voteError"
                                                    class="rounded-md bg-red-50 dark-bg-opacity-red p-4" x-cloak>
                                                    <div class="flex items-center">
                                                        <div class="flex-shrink-0">


                                                            <svg class="h-5 w-5 text-red-400"
                                                                xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                                                viewBox="0 0 20 20" stroke="">
                                                                <path fill-rule="evenodd"
                                                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                                                                    clip-rule="evenodd" />

                                                            </svg>

                                                        </div>
                                                        <div class="ml-3">
                                                            <div class="text-sm text-red-700 dark:text-red-100"
                                                                x-text="voteError"></div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div class="cf-turnstile" data-sitekey="0x4AAAAAAAkdq_KiqBksgskS"
                                                    data-callback="onloadTurnstileCallback"
                                                    @turnstile-token-success.window="submitPoll($event.detail.token)">
                                                </div>



                                                <div x-show="showVoteButtons || isEditActive" x-cloak>
                                                    <div class="block sm:hidden"
                                                        :class="{ 'fixed bottom-0 left-0 right-0 z-50 py-4 custom-box-bg p-4 pb-8 border-t border-default': $store.poll.type === 'meeting' && viewType === 'list' && isEditActive && showStickyVoteButtons }"
                                                        @scroll.window.throttle.100ms="updateScrollPosY()">
                                                        <div class="grid grid-cols-2 gap-4">
                                                            <button type="submit"
                                                                class="strawpoll-button-primary button text-sm custom-button px-8 w-full">
                                                                <div x-show="isLoadingVote" x-cloak>
                                                                    Validating...
                                                                </div>
                                                                <div class="flex items-center" x-show="!isLoadingVote">
                                                                    <div x-show="voteData.voteType !== 'edit'" x-cloak>
                                                                        Vote</div>
                                                                    <div x-show="voteData.voteType === 'edit'" x-cloak>
                                                                        Update vote</div>
                                                                </div>
                                                            </button>

                                                            <div class="flex items-center space-x-4">
                                                                <a href="/embed/Q0Zp7VrbAgM/results"
                                                                    class="button strawpoll-button-secondary custom-field-input w-full text-sm flex items-center"
                                                                    x-show="$store.pollUser.isAdmin || $store.poll.pollConfig.resultsVisibility !== 'after_vote'"
                                                                    x-cloak>


                                                                    <svg class="h-5 w-5 -ml-1 mr-2 "
                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                        fill="currentColor" viewBox="0 0 20 20"
                                                                        stroke="">
                                                                        <path
                                                                            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />

                                                                    </svg>

                                                                    <span>Results</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="hidden sm:block">
                                                        <div class="flex items-center justify-between">
                                                            <div class="flex items-center space-x-4">
                                                                <button type="submit"
                                                                    class="strawpoll-button-primary button text-sm custom-button px-8"
                                                                    :disabled="isLoadingVote">
                                                                    <div class="flex items-center space-x-2"
                                                                        x-show="isLoadingVote" x-cloak>
                                                                        <svg class="animate-spin h-5 w-5 text-white"
                                                                            xmlns="http://www.w3.org/2000/svg"
                                                                            fill="none" viewBox="0 0 24 24">
                                                                            <circle class="opacity-25" cx="12" cy="12"
                                                                                r="10" stroke="currentColor"
                                                                                stroke-width="4"></circle>
                                                                            <path class="opacity-75" fill="currentColor"
                                                                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                                            </path>
                                                                        </svg>
                                                                        <span>Validating...</span>
                                                                    </div>
                                                                    <div class="flex items-center"
                                                                        x-show="!isLoadingVote">
                                                                        <div x-show="voteData.voteType !== 'edit'"
                                                                            x-cloak>Vote</div>
                                                                        <div x-show="voteData.voteType === 'edit'"
                                                                            x-cloak>Update vote</div>
                                                                        <div class="hidden sm:block"
                                                                            x-show="voteData.voteType !== 'edit'"
                                                                            x-cloak>


                                                                            <svg class="h-5 w-5 ml-2 "
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path fill-rule="evenodd"
                                                                                    d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z"
                                                                                    clip-rule="evenodd" />

                                                                            </svg>

                                                                        </div>
                                                                    </div>
                                                                </button>

                                                                <a href="/embed/Q0Zp7VrbAgM/results"
                                                                    class="button strawpoll-button-secondary custom-field-input flex items-center"
                                                                    x-show="$store.pollUser.isAdmin || $store.poll.pollConfig.resultsVisibility !== 'after_vote'"
                                                                    x-show="$store.pollUser.isAdmin || $store.poll.pollConfig.resultsVisibility !== 'after_vote'"
                                                                    x-cloak>


                                                                    <svg class="h-5 w-5 -ml-1 mr-2 "
                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                        fill="currentColor" viewBox="0 0 20 20"
                                                                        stroke="">
                                                                        <path
                                                                            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />

                                                                    </svg>

                                                                    <span>Show results</span>
                                                                </a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!--div>
	<div class="flex items-center space-x-4">
		<button type="submit" class="strawpoll-button-primary button text-sm custom-button px-8 w-full sm:w-auto">
			<div x-show="isLoadingVote" x-cloak>
				Validating...
			</div>
			<div class="flex items-center space-x-2" x-show="!isLoadingVote">
				<div x-show="!isEditActive" x-cloak>Vote</div>
				<div x-show="isEditActive" x-cloak>Update vote</div>
				<div class="hidden sm:block">
					

<svg 
	
	class="h-5 w-5 " 
	xmlns="http://www.w3.org/2000/svg" 
	fill="currentColor"
	viewBox="0 0 20 20"
	stroke="">
	<path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"/>

</svg>

				</div>
			</div>
		</button>

			<div class="text-center text-sm custom-text w-full sm:w-auto" x-show="$store.pollUser.isAdmin || $store.poll.pollConfig.resultsVisibility !== 'after_vote'" x-cloak>
				<a href="/embed/Q0Zp7VrbAgM/results" class="strawpoll-button-secondary border custom-border px-4 py-2 rounded-md flex items-center justify-center">
					Show results
				</a>
			</div>
	</div>
</div-->

                                            </div>
                    </form>


                    <script>
                        let sessionToken = null

                        function pollVote() {
                            return {
                                pollResults: {
                                    pollParticipants: []
                                },
                                showVoteButtons: true,
                                selectedOptions: [],
                                votedOptionCount: 0,
                                selectedOptionCount: 0,
                                voteData: {
                                    id: '',
                                    name: 'Brevity',
                                    pollVotes: [],
                                    voteType: 'add',
                                    token: '',
                                    isEmbed: true,
                                },
                                viewType: 'list',
                                hasLocalVote: false,
                                isEditActive: false,
                                voteError: null,
                                isLoadingVote: false,
                                staticTimezone: null,
                                currentTimezone: strawpoll.getTimezone(),
                                userVotes: [],
                                localVotes: [],
                                scrollPosY: 0,
                                showStickyVoteButtons: false,
                                showTopStickyVoteButtons: false,
                                suggestLinkOut: false,
                                init() {
                                    if (this.$store.poll.pollMeta.timezone) {
                                        this.currentTimezone = this.$store.poll.pollMeta.timezone
                                    }

                                    this.$nextTick(() => {
                                        let frameHeight = document.getElementById('strawpoll_box_' + this.$store.poll.id).offsetHeight + 30
                                        // frameHeight = frameHeight > 2000 ? 2000 : frameHeight
                                        window.parent.postMessage({ 'type': 'strawpoll_resize', 'id': this.$store.poll.id, 'value': frameHeight }, '*')
                                        window.parent.postMessage({ 'type': 'strawpoll_request_session_token', 'id': this.$store.poll.id }, '*')
                                    })


                                    if (this.voteData.isEmbed && !sessionToken) {
                                        this.waitForSessionToken()
                                    } else {
                                        this.checkUserVotes()
                                    }

                                    this.$watch('voteError', value => {
                                        this.$nextTick(() => {
                                            window.parent.postMessage({ 'id': this.$store.poll.id, 'type': 'strawpoll_resize', 'value': document.getElementById('strawpoll_box_' + this.$store.poll.id).offsetHeight + 30 + 100 }, '*')
                                        })
                                    })
                                },
                                async waitForSessionToken(tries = 0) {
                                    if (tries > 100) {
                                        // this.voteError = 'Session ID missing. Please make sure you allow cookies in your browser and reload the page.'
                                        return
                                    }
                                    if (sessionToken) {
                                        await this.checkUserVotes()
                                    } else {
                                        const self = this
                                        setTimeout(function () { self.waitForSessionToken(tries + 1) }, 50)
                                    }
                                },
                                async checkUniqueCode() {
                                    const response = await strawpoll.fetchAPI('/polls/' + this.$store.poll.id + '/unique_code', {
                                        method: 'POST',
                                        body: JSON.stringify({
                                            unique_code: this.voteData.token,
                                        })
                                    })

                                    if (!response.error) {
                                        const data = strawpoll.toCamelCaseKeys(response)
                                        if (data.voteType === 'add') {

                                        } else if (data.voteType === 'edit') {
                                            this.voteData.voteType = 'edit'
                                            this.voteData.id = data.id
                                            this.voteData.key = data.key
                                        }
                                    }
                                },
                                updateScrollPosY() {
                                    this.$nextTick(() => {
                                        let dataListTable = document.getElementById('dataListTable')
                                        if (dataListTable) {
                                            if (window.pageYOffset < this.scrollPosY || window.pageYOffset > dataListTable.scrollHeight - 200) {
                                                this.showStickyVoteButtons = false
                                            } else if (window.pageYOffset > 50) {
                                                this.showStickyVoteButtons = true
                                            }
                                            this.scrollPosY = window.pageYOffset
                                        }

                                        // console.log(window.pageYOffset)

                                        if (window.pageYOffset > 100) {
                                            this.showTopStickyVoteButtons = true
                                        } else if (window.pageYOffset <= 100) {
                                            this.showTopStickyVoteButtons = false
                                        }
                                    })
                                },
                                async checkUserVotes() {
                                    if (this.$store.poll.pollConfig.editVotePermissions === 'nobody') {
                                        return
                                    }

                                    if (this.$store.poll.pollConfig.editVotePermissions === 'admin' && !this.$store.pollUser.isAdmin) {
                                        return
                                    }

                                    const result = await strawpoll.fetchAPI('/users/@me/polls/' + this.$store.poll.id + '/votes', {
                                        method: 'POST',
                                        body: JSON.stringify({
                                            st: sessionToken,
                                        })
                                    })

                                    if (!result.error) {
                                        this.userVotes = strawpoll.toCamelCaseKeys(result.data)
                                    }

                                    let pollResults = this.$store.pollResults

                                    pollResults.pollParticipants.forEach((pollParticipant) => {
                                        if (this.$store.pollUser.isAdmin &&
                                            (this.$store.poll.pollConfig.editVotePermissions === 'admin'
                                                || this.$store.poll.pollConfig.editVotePermissions === 'admin_voter')) {
                                            pollParticipant.isEditAllowed = true
                                        }

                                        if (this.$store.poll.pollConfig.editVotePermissions === 'everybody') {
                                            pollParticipant.isEditAllowed = true
                                        }
                                    })

                                    this.userVotes.forEach((userVote) => {
                                        if ((!this.$store.poll.resetAt && !userVote.pollResetAt) || this.$store.poll.resetAt === userVote.pollResetAt) {
                                            if (pollResults.pollParticipants.length === 0 || pollResults.pollParticipants.findIndex(p => p.id === userVote.voteData.id) > -1) {
                                                this.localVotes.push(userVote)
                                            }
                                        }

                                        if (this.$store.poll.pollConfig.hideParticipants && !this.$store.pollUser.isAdmin) {
                                            let pollVotes = []
                                            pollResults.pollOptions.forEach((pollOption) => {
                                                const voteIndex = userVote.voteData.pollVotes.findIndex(v => v.id === pollOption.id)

                                                if (voteIndex > -1) {
                                                    pollVotes.push(userVote.voteData.pollVotes[voteIndex].value)
                                                } else {
                                                    pollVotes.push(null)
                                                }
                                            })

                                            pollResults.pollParticipants.push({
                                                id: userVote.voteData.id,
                                                name: userVote.voteData.name,
                                                pollVotes: pollVotes
                                            })
                                        }

                                        const rowIndex = pollResults.pollParticipants.findIndex(p => p.id === userVote.voteData.id)
                                        if (rowIndex > -1) {
                                            pollResults.pollParticipants[rowIndex].isEditAllowed = true
                                            pollResults.pollParticipants[rowIndex].key = userVote.voteData.key
                                        }
                                    })

                                    // this.$store.pollResults.update(pollResults)

                                    if (this.viewType === 'grid') {
                                        this.$dispatch('setup-datagrid')
                                    }

                                    if (this.viewType !== 'grid') {
                                        if (this.localVotes.length > 1) {
                                            this.selectLocalVote(this.localVotes[this.localVotes.length - 1].voteData)
                                        } else if (this.localVotes.length === 1) {
                                            this.selectLocalVote(this.localVotes[0].voteData)
                                        } else {
                                            this.hasLocalVote = false
                                        }
                                    }

                                    this.$nextTick(() => {
                                        window.parent.postMessage({ 'id': this.$store.poll.id, 'type': 'strawpoll_resize', 'value': document.getElementById('strawpoll_box_' + this.$store.poll.id).offsetHeight + 30 + 100 }, '*')
                                    })
                                },
                                selectLocalVote(voteData) {
                                    this.hasLocalVote = true
                                    let pollVotes = []
                                    this.$store.poll.pollOptions.forEach((pollOption) => {
                                        const voteIndex = voteData.pollVotes.findIndex(v => v.id === pollOption.id)

                                        if (voteIndex > -1) {
                                            pollVotes.push({ id: pollOption.id, value: voteData.pollVotes[voteIndex].value })
                                        } else {
                                            pollVotes.push({ id: pollOption.id, value: null })
                                        }
                                    })
                                    this.selectedOptions = pollVotes
                                    this.voteData = voteData
                                    this.voteData.voteType = 'edit'
                                    this.$nextTick(() => {
                                        this.$dispatch('update-checked-options')
                                        this.$dispatch('update-viewstate', 'edit')
                                    })
                                },
                                checkFullDays() {
                                    let hasFullDays = false
                                    this.$store.poll.pollOptions.forEach((pollOption) => {
                                        if (pollOption.secondary === 'full_day') hasFullDays = true
                                    })
                                    return hasFullDays
                                },
                                parseSelectedOptions() {
                                    this.voteData.pollVotes = this.selectedOptions
                                    this.votedOptionCount = 0
                                    this.selectedOptionCount = 0
                                    this.voteData.pollVotes.forEach((vote) => {
                                        // if (this.$store.poll.type === 'meeting' && vote.value === null) {
                                        // vote.value = 0
                                        // }
                                        if (vote.value === 1) {
                                            this.votedOptionCount++
                                        }
                                        if (vote.value !== null) {
                                            this.selectedOptionCount++
                                        }
                                    })
                                },
                                async votePoll() {
                                    this.submitPoll(null)
                                },
                                async submitPoll(token) {
                                    if (!this.$store.poll.pollConfig.isMultipleChoice && this.selectedOptions.length === 0) {
                                        this.voteError = strawpoll.placeholder('Please choose at least {min} option(s).', { min: 1 })
                                        this.$dispatch('alert-min-options')
                                        return
                                    }

                                    this.parseSelectedOptions()

                                    // this.selectedOptions.forEach((selectedOption) => {
                                    // 	const index = this.$store.poll.pollOptions.findIndex(pollOption => pollOption.id === selectedOption.id)

                                    // 	if (index > -1) {
                                    // 		this.voteData.pollVotes[index] = selectedOption.value
                                    // 	}
                                    // })

                                    if (this.$store.poll.pollConfig.isMultipleChoice) {
                                        if (this.selectedOptions.length < this.$store.poll.pollConfig.multipleChoiceMin) {
                                            this.voteError = strawpoll.placeholder('Please choose at least {min} option(s).', { min: this.$store.poll.pollConfig.multipleChoiceMin })
                                            return
                                        }
                                    }

                                    if (this.$store.poll.pollConfig.requireVoterNames && !this.voteData.name) {
                                        // this.$dispatch('add-participant')
                                        this.$dispatch('hide-all-participants')
                                        // this.voteError = 'Please fill in the required field: Name'
                                        this.$store.notification.show({ title: 'Please fill in the required field: Name', type: 'error' })
                                        return
                                    }

                                    // const result = await strawpoll.votePoll(this.$store.poll, this.voteData)

                                    // if (this.$store.poll.pollConfig.strictChecking && (this.$store.poll.pollConfig.duplicationChecking === 'session' || this.$store.poll.pollConfig.duplicationChecking === 'ip')) {
                                    // 	if (window.isIncognito === true) {
                                    // 		this.$store.notification.show({ title: 'Voting in incognito mode is not allowed. Please disable incognito mode and try again.', type: 'error' })
                                    // 		return
                                    // 	}
                                    // }

                                    if (!this.voteData.voteType) {
                                        this.voteData.voteType = 'add'
                                    }

                                    if ((this.voteData.voteType === 'add' || this.voteData.voteType === 'edit') && this.$store.poll.type === 'meeting' && this.selectedOptionCount === 0) {
                                        this.voteError = strawpoll.placeholder('Please choose at least {min} option(s).', { min: 1 })
                                        return
                                    }

                                    this.isLoadingVote = true
                                    this.voteError = null
                                    this.suggestLinkOut = false

                                    const result = await strawpoll.fetchAPI('/polls/' + this.$store.poll.id + '/vote', {
                                        method: 'POST',
                                        body: JSON.stringify({
                                            pv: this.$store.poll.version,
                                            v: this.voteData,
                                            h: false, // headless
                                            ht: false, // hasTouch
                                            token: token,
                                            st: sessionToken,
                                        })
                                    })


                                    if (result.suspicious) {
                                        if (window.turnstile) {
                                            turnstile.remove()
                                        }

                                        this.loadTurnstile()
                                        return
                                    }

                                    this.isLoadingVote = false

                                    if (result.error) {
                                        if (window.turnstile) {
                                            turnstile.remove()
                                        }

                                        if (result.error.missing_session_id && this.voteData.isEmbed) {
                                            this.suggestLinkOut = true
                                        } else {
                                            this.voteError = result.error.message
                                        }
                                    } else {
                                        this.voteError = null


                                        if (this.$store.poll.type === 'meeting') {
                                            if (this.viewType === 'grid') {
                                                document.querySelector('.dataGridContainer').scrollTo(0, document.querySelector('.dataGridContainer').scrollHeight);
                                                this.voteData.id = null
                                                this.voteData.name = ''
                                                this.voteData.voteType = 'add'
                                            }
                                        } else {
                                            this.$nextTick(() => { this.checkUserVotes() })
                                        }

                                        this.$dispatch('vote-success-modal', { poll: this.$store.poll })
                                    }
                                },
                                loadTurnstile() {
                                    if (window.turnstile) {
                                        turnstile.render(document.querySelector('.cf-turnstile'))
                                        return
                                    }

                                    const script = document.createElement('script')
                                    script.src = 'https://challenges.cloudflare.com/turnstile/v0/api.js'
                                    script.async = true
                                    script.defer = true
                                    document.head.appendChild(script)
                                },
                            }
                        }

                        function onloadTurnstileCallback(token) {
                            var evt = new CustomEvent('turnstile-token-success', { detail: { token: token } });
                            window.dispatchEvent(evt);
                        }
                    </script>

                    <script>
                        window.onmessage = async (e) => {
                            if (e.data && e.data.type && e.data.type === 'strawpoll_return_session_token') {

                                if (e.data.value && e.data.value) {
                                    sessionToken = e.data.value
                                }
                            }
                        }

                    </script>



                    <div class="strawpoll-embed-footer px-4 sm:px-6 py-3 border-t custom-border space-y-3">
                        <div class="flex flex-col items-center sm:flex-row sm:justify-between">
                            <div class="hidden sm:block">
                                <span class="custom-text">
                                    <span x-text="Number($store.poll.pollMeta.voteCount).toLocaleString()"></span> votes
                                </span>
                            </div>
                            <div class="custom-text">Powered by <a href="https://strawpoll.com/" target="_blank"
                                    class="font-semibold hover:underline">StrawPoll</a></div>
                        </div>
                    </div>

                </div>

            </div>



        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @vote-success-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 custom-text custom-input-highlight"
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>


                        <div class="strawpoll-vote-success-modal px-4 pt-5 pb-4 sm:p-6 rounded-md custom-box">
                            <div>
                                <div
                                    class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 ">
                                    <svg class="h-6 w-6 text-green-600 " x-description="Heroicon name: outline/check"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M5 13l4 4L19 7"></path>
                                    </svg>
                                </div>
                                <div class="mt-3 text-center sm:mt-5">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-white custom-title"
                                        id="modal-title">
                                        Vote successful
                                    </h3>
                                    <div class="mt-2">
                                        <p class="text-sm text-gray-500 custom-text">
                                            Thank you for participating in this poll. Your vote has been counted.
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div
                                class="strawpoll-vote-success-modal-button-container mt-4 sm:mt-6 sm:flex sm:space-x-6">
                                <a href="/embed/Q0Zp7VrbAgM/results" class="button w-full custom-button">


                                    <svg class="h-5 w-5 -ml-1 mr-2 " xmlns="http://www.w3.org/2000/svg"
                                        fill="currentColor" viewBox="0 0 20 20" stroke="">
                                        <path
                                            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />

                                    </svg>

                                    <span>Results</span>
                                </a>
                            </div>
                        </div>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-xl', poll: null }"
            @poll-settings-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollSettings()" @update-poll.window="poll = $event.detail.poll"
                            class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4">
                                Poll settings
                            </div>
                            <div class="px-4 py-2 sm:px-6">
                                <div>
                                    <div class="sm:hidden mt-2">
                                        <label for="tabs" class="sr-only">Select a tab</label>
                                        <select id="tabs" name="tabs" class="select" x-model.number="activeTab">
                                            <option :value="0">General</option>

                                            <option :value="1">Voting</option>

                                            <option :value="2">Results</option>

                                            <option :value="3">Design</option>

                                            <!--option :value="4">Notifications</option-->
                                        </select>
                                    </div>
                                    <div class="hidden sm:block">
                                        <div class="border-b border-gray-200 dark:border-gray-700">
                                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                                <button type="button" @click="activeTab = 0"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 0, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 0) }"
                                                    aria-current="page">
                                                    General
                                                </button>

                                                <button type="button" @click="activeTab = 1"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 1, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 1) }">
                                                    Voting
                                                </button>

                                                <button type="button" @click="activeTab = 2"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 2, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 2) }">
                                                    Results
                                                </button>

                                                <button type="button" @click="activeTab = 3"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 3, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 3) }">
                                                    Design
                                                </button>

                                                <!--button type="button" @click="activeTab = 4" class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm" :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 4, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 4) }">
							Notifications
						</button-->
                                            </nav>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-8" style="min-height: 160px;">
                                    <div class="space-y-5" x-show="activeTab === 0"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">

                                        <template
                                            x-if="poll.type === 'multiple_choice' || poll.type === 'image_poll' || poll.type === 'meeting'">
                                            <div>

                                                <div class="flex items-center justify-between space-x-10">
                                                    <label
                                                        class="label cursor-pointer w-full flex items-center space-x-1"
                                                        for="allow-selection-of-multiple-options">
                                                        <span>Allow selection of multiple options</span>
                                                    </label>

                                                    <div class="relative leading-none">
                                                        <input type="checkbox" id="allow-selection-of-multiple-options"
                                                            x-model.number="poll.pollConfig.isMultipleChoice"
                                                            class="switch" role="switch" value="1" @change=""
                                                            :disabled="false" />
                                                        <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                            class="switch-button"
                                                            :class="{ 'translate-x-5': poll.pollConfig.isMultipleChoice, 'translate-x-0': !(poll.pollConfig.isMultipleChoice) }"></span>
                                                    </div>

                                                </div>


                                                <div class="flex items-center justify-between mt-3"
                                                    x-show="poll.pollConfig.isMultipleChoice">
                                                    <div class="mr-3 text-gray-400 dark:text-gray-400"
                                                        style="transform: rotate(180deg); transform-origin: 10px 10px;">


                                                        <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                            fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                            <path fill-rule="evenodd"
                                                                d="M7.707 3.293a1 1 0 010 1.414L5.414 7H11a7 7 0 017 7v2a1 1 0 11-2 0v-2a5 5 0 00-5-5H5.414l2.293 2.293a1 1 0 11-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                                                                clip-rule="evenodd" />

                                                        </svg>

                                                    </div>
                                                    <select class="select" x-model="multipleChoiceType">
                                                        <option value="unlimited">Unlimited</option>
                                                        <option value="exact">Exact number</option>
                                                        <option value="range">Range</option>
                                                    </select>
                                                    <div class="flex items-center justify-between">
                                                        <input type="number" inputmode="numeric" class="input ml-3"
                                                            :placeholder="'1-'+ poll.pollOptions.length"
                                                            x-show="multipleChoiceType === 'range'"
                                                            x-model="poll.pollConfig.multipleChoiceMin" />
                                                        <input type="number" inputmode="numeric" class="input ml-3"
                                                            :placeholder="'1-'+ poll.pollOptions.length"
                                                            x-show="multipleChoiceType !== 'unlimited'"
                                                            x-model="poll.pollConfig.multipleChoiceMax" />
                                                    </div>
                                                </div>
                                            </div>
                                        </template>

                                        <template x-if="poll.type === 'ranking'">

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="random-order-of-options">
                                                    <span>Random order of options</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="random-order-of-options"
                                                        x-model.number="poll.pollConfig.randomizeOptions" class="switch"
                                                        role="switch" value="1" @change="" :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.randomizeOptions, 'translate-x-0': !(poll.pollConfig.randomizeOptions) }"></span>
                                                </div>

                                            </div>

                                        </template>

                                        <template x-if="poll.type === 'ranking'">

                                            <div class="flex justify-between items-center">
                                                <label for="max-points" class="label">Max. points</label>

                                                <input type="number" id="max-points" name="max-points"
                                                    class="input mt-1 py-2" x-model="poll.pollConfig.maxPoints"
                                                    placeholder="1" min="false" style="max-width: 64px;"
                                                    :disabled="false">
                                            </div>

                                        </template>


                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="require-participant-names">
                                                <span>Require participant names</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="require-participant-names"
                                                    x-model.number="poll.pollConfig.requireVoterNames" class="switch"
                                                    role="switch" value="1" @change=""
                                                    :disabled="poll.type === &#39;meeting&#39;" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.requireVoterNames, 'translate-x-0': !(poll.pollConfig.requireVoterNames) }"></span>
                                            </div>

                                        </div>


                                        <template x-if="poll.type === 'multiple_choice'">

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="allow-voters-to-add-other-answers">
                                                    <span>Allow voters to add other answers</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="allow-voters-to-add-other-answers"
                                                        x-model.number="poll.pollConfig.allowOtherOption" class="switch"
                                                        role="switch" value="1" @change="" :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.allowOtherOption, 'translate-x-0': !(poll.pollConfig.allowOtherOption) }"></span>
                                                </div>

                                            </div>

                                        </template>

                                        <div x-show="poll.pollConfig.allowOtherOption" x-claok>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="show-other-options-in-voting-list">
                                                    <span>Show &quot;Other&quot; options in voting list</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="show-other-options-in-voting-list"
                                                        x-model.number="poll.pollConfig.showWriteInOptions"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="poll.pollConfig.hideOtherOptionResults === true" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.showWriteInOptions, 'translate-x-0': !(poll.pollConfig.showWriteInOptions) }"></span>
                                                </div>

                                            </div>

                                        </div>

                                        <div x-show="poll.pollConfig.allowOtherOption" x-claok>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="combine-other-options-in-results">
                                                    <span>Combine &quot;Other&quot; options in results</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="combine-other-options-in-results"
                                                        x-model.number="poll.pollConfig.hideOtherOptionResults"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="poll.pollConfig.showWriteInOptions === true" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.hideOtherOptionResults, 'translate-x-0': !(poll.pollConfig.hideOtherOptionResults) }"></span>
                                                </div>

                                            </div>

                                        </div>


                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="allow-comments">
                                                <span>Allow comments</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="allow-comments"
                                                    x-model.number="poll.pollConfig.allowComments" class="switch"
                                                    role="switch" value="1" @change="" :disabled="false" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.allowComments, 'translate-x-0': !(poll.pollConfig.allowComments) }"></span>
                                            </div>

                                        </div>



                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="hide-share-button">
                                                <span>Hide share button</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="hide-share-button"
                                                    x-model.number="poll.pollConfig.hideShareButton" class="switch"
                                                    role="switch" value="1" @change="" :disabled="false" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.hideShareButton, 'translate-x-0': !(poll.pollConfig.hideShareButton) }"></span>
                                            </div>

                                        </div>

                                    </div>

                                    <div class="space-y-5" x-show="activeTab === 1"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">


                                        <div class="w-full">
                                            <div class="flex justify-between mb-1">
                                                <label for="voting-security" class="label">
                                                    Voting security
                                                </label>
                                                <button type="button" class="link text-sm"
                                                    @click="$dispatch(&#39;poll-duplication-checking-modal&#39;)">
                                                    Learn more
                                                </button>
                                            </div>

                                            <select id="voting-security" name="voting-security" class="select"
                                                x-model="poll.pollConfig.duplicationChecking" :disabled="false">
                                                <option value="none"
                                                    :disabled="poll.pollConfig.requireVoterNames === false"
                                                    x-show="true" x-cloak>Multiple votes per person</option>
                                                <option value="session" :disabled="false" x-show="true" x-cloak>One vote
                                                    per browser session</option>
                                                <option value="ip" :disabled="false" x-show="true" x-cloak>One vote per
                                                    IP address</option>
                                                <option value="email" :disabled="true" x-show="true" x-cloak>One vote
                                                    per email address (coming soon)</option>
                                                <option value="token" :disabled="false" x-show="true" x-cloak>One vote
                                                    per unique code</option>
                                            </select>
                                        </div>


                                        <div x-show="poll.pollConfig.duplicationChecking === 'session' || poll.pollConfig.duplicationChecking ==='ip'"
                                            x-cloak>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="voting-interval">
                                                    <span>Voting interval</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="voting-interval"
                                                        x-model.number="toggleVotingInterval" class="switch"
                                                        role="switch" value="1" @change="" :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': toggleVotingInterval, 'translate-x-0': !(toggleVotingInterval) }"></span>
                                                </div>

                                            </div>


                                            <div class="mt-2" x-show="toggleVotingInterval" x-cloak>


                                                <div class="w-full">

                                                    <select id="name-DwyoDDjrxnA" name="name-DwyoDDjrxnA" class="select"
                                                        x-model="poll.pollConfig.votingInterval" :disabled="false">
                                                        <option value="60" :disabled="false" x-show="true" x-cloak>Once
                                                            per minute</option>
                                                        <option value="3600" :disabled="false" x-show="true" x-cloak>
                                                            Once per hour</option>
                                                        <option value="86400" :disabled="false" x-show="true" x-cloak>
                                                            Once per day</option>
                                                        <option value="604800" :disabled="false" x-show="true" x-cloak>
                                                            Once per week</option>
                                                        <option value="18144000" :disabled="false" x-show="true"
                                                            x-cloak>Once per month</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>


                                        <div class="w-full">
                                            <div class="flex justify-between">
                                                <label for="datetime" class="label">
                                                    End date
                                                    <span class="text-sm text-gray-500">(optional)</span>
                                                </label>
                                                <button type="button" class="link text-sm"
                                                    @click="$dispatch(&#39;set-datetime&#39;, Math.floor((new Date).getTime() / 1000))">
                                                    Close poll
                                                </button>
                                            </div>

                                            <div class="mt-1"
                                                x-data="dateTimePicker({ unixtime: poll.pollConfig.deadlineAt })"
                                                @set-datetime.window="epochToDatetime($event.detail); setDateTime()">
                                                <input type="datetime-local" class="input" name="datetime"
                                                    x-model="datetime" placeholder="Select date"
                                                    @blur="setDateTime()" />
                                                <div x-show="customTimezone" x-cloak>
                                                    <span class="text-xs">This date is in the time zone: <span
                                                            x-text="timezone"></span></span>
                                                </div>
                                                <div x-show="error" x-cloak>
                                                    <span class="text-red-500 text-xs" x-text="error"></span>
                                                </div>
                                            </div>

                                            <script>
                                                function dateTimePicker(config) {
                                                    return {
                                                        datetime: null,
                                                        error: null,
                                                        timezone: strawpoll.getTimezone(),
                                                        customTimezone: false,
                                                        init() {
                                                            if (config.unixtime) {
                                                                this.epochToDatetime(config.unixtime)
                                                            }
                                                            if (this.timezone !== Intl.DateTimeFormat().resolvedOptions().timeZone) {
                                                                this.customTimezone = true
                                                            }
                                                            this.setDateTime()
                                                        },
                                                        epochToDatetime(epoch) {
                                                            if (this.timezone) {
                                                                this.datetime = dayjs(new Date(epoch * 1000)).tz(this.timezone).format('YYYY-MM-DDTHH:mm')
                                                            } else {
                                                                this.datetime = dayjs(new Date(epoch * 1000)).format('YYYY-MM-DDTHH:mm')
                                                            }
                                                        },
                                                        setDateTime() {
                                                            this.error = null
                                                            if (!this.datetime) {
                                                                this.poll.pollConfig.deadlineAt = null
                                                                return
                                                            }

                                                            let date = null
                                                            let timediff = Math.round((new Date(dayjs(new Date()).tz(this.timezone).format('YYYY-MM-DDTHH:mm:ss')).getTime() - new Date().getTime()) / 1000)

                                                            // convert timezone back to browsers timezone
                                                            if (this.timezone) {
                                                                date = new Date(new Date(this.datetime).getTime() - timediff * 1000)
                                                            } else {
                                                                date = new Date(this.datetime)
                                                            }
                                                            const now = new Date()

                                                            // if (date.getTime() < now.getTime() - 120000) {
                                                            // 	this.error = 'Please choose a date in the future.'
                                                            // 	return
                                                            // }

                                                            this.poll.pollConfig.deadlineAt = Math.round(date.getTime() / 1000)
                                                        }
                                                    }
                                                }
                                            </script>

                                        </div>


                                        <div x-show="poll.pollConfig.duplicationChecking !== 'user'" x-claok>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="require-user-account-for-voting">
                                                    <span>Require user account for voting</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="require-user-account-for-voting"
                                                        x-model.number="poll.pollConfig.requireVoterAccount"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.requireVoterAccount, 'translate-x-0': !(poll.pollConfig.requireVoterAccount) }"></span>
                                                </div>

                                            </div>

                                        </div>

                                        <div x-show="poll.pollConfig.duplicationChecking ==='ip'" x-cloak>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="block-vpn-users">
                                                    <span>Block VPN users</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="block-vpn-users"
                                                        x-model.number="poll.pollConfig.blockVpnUsers" class="switch"
                                                        role="switch" value="1" @change="" :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.blockVpnUsers, 'translate-x-0': !(poll.pollConfig.blockVpnUsers) }"></span>
                                                </div>

                                            </div>

                                        </div>

                                        <template x-if="poll.pollConfig.voteType === 'participant_grid'">

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="allow-if-need-be-answer">
                                                    <span>Allow &quot;If need be&quot; answer</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="allow-if-need-be-answer"
                                                        x-model.number="poll.pollConfig.allowIndeterminate"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.allowIndeterminate, 'translate-x-0': !(poll.pollConfig.allowIndeterminate) }"></span>
                                                </div>

                                            </div>

                                        </template>

                                        <template x-if="false">


                                            <div class="w-full">
                                                <div class="flex justify-between mb-1">
                                                    <label for="voting-type" class="label">
                                                        Voting Type
                                                        <span class="text-sm text-gray-500">(Change requires page
                                                            reload)</span>
                                                    </label>
                                                </div>

                                                <select id="voting-type" name="voting-type" class="select"
                                                    x-model="poll.pollConfig.voteType" :disabled="false">
                                                    <option value="default" :disabled="false" x-show="true" x-cloak>Poll
                                                        (default)</option>
                                                    <option value="box_small" :disabled="false" x-show="true" x-cloak>
                                                        Poll (Small boxes)</option>
                                                    <option value="participant_grid"
                                                        :disabled="!poll.pollConfig.requireVoterNames" x-show="true"
                                                        x-cloak>Participant grid</option>
                                                </select>
                                            </div>

                                        </template>

                                        <template x-if="poll.type === 'meeting'">

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="hide-unavailable-options">
                                                    <span>Hide unavailable options</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="hide-unavailable-options"
                                                        x-model.number="poll.pollConfig.hideUnavailableOptions"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.hideUnavailableOptions, 'translate-x-0': !(poll.pollConfig.hideUnavailableOptions) }"></span>
                                                </div>

                                            </div>

                                        </template>

                                        <template x-if="poll.pollConfig.voteType === 'participant_grid'">
                                            <div class="flex items-center justify-between">
                                                <button type="button"
                                                    @click="$dispatch('poll-option-limits-modal', { poll: poll })"
                                                    class="text-sm text-indigo-500 dark:text-indigo-400">Configure
                                                    option limits</button>
                                            </div>
                                        </template>
                                    </div>

                                    <div class="space-y-5" x-show="activeTab === 2"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">


                                        <div class="w-full">
                                            <div class="flex justify-between mb-1">
                                                <label for="edit-vote-permissions" class="label">
                                                    Edit vote permissions
                                                </label>
                                            </div>

                                            <select id="edit-vote-permissions" name="edit-vote-permissions"
                                                class="select" x-model="poll.pollConfig.editVotePermissions"
                                                :disabled="false">
                                                <option value="nobody" :disabled="false" x-show="true" x-cloak>Nobody
                                                </option>
                                                <option value="admin" :disabled="false" x-show="true" x-cloak>Admin
                                                </option>
                                                <option value="admin_voter" :disabled="false" x-show="true" x-cloak>
                                                    Admin &amp; own votes</option>
                                                <option value="voter" :disabled="false" x-show="true" x-cloak>Own votes
                                                    only</option>
                                                <option value="everybody" :disabled="false" x-show="true" x-cloak>
                                                    Everybody</option>
                                            </select>
                                        </div>


                                        <template x-if="poll.pollConfig.voteType !== 'participant_grid'">
                                            <div>


                                                <div class="w-full">
                                                    <div class="flex justify-between mb-1">
                                                        <label for="results-visibility" class="label">
                                                            Results visibility
                                                        </label>
                                                    </div>

                                                    <select id="results-visibility" name="results-visibility"
                                                        class="select" x-model="poll.pollConfig.resultsVisibility"
                                                        :disabled="false">
                                                        <option value="always" :disabled="false" x-show="true" x-cloak>
                                                            Always public</option>
                                                        <option value="after_deadline" :disabled="false" x-show="true"
                                                            x-cloak>Public after end date</option>
                                                        <option value="after_vote" :disabled="false" x-show="true"
                                                            x-cloak>Public after vote</option>
                                                        <option value="hidden" :disabled="false" x-show="true" x-cloak>
                                                            Not public</option>
                                                    </select>
                                                </div>


                                                <div x-show="poll.pollConfig.resultsVisibility === 'hidden' && !$store.user.id"
                                                    class="mt-1 text-red-500 text-sm">
                                                    This setting is only available for registered users.
                                                </div>
                                            </div>
                                        </template>

                                        <template x-if="poll.pollConfig.requireVoterNames">

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="hide-participants-from-each-other">
                                                    <span>Hide participants from each other</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="hide-participants-from-each-other"
                                                        x-model.number="poll.pollConfig.hideParticipants" class="switch"
                                                        role="switch" value="1" @change="" :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.hideParticipants, 'translate-x-0': !(poll.pollConfig.hideParticipants) }"></span>
                                                </div>

                                            </div>

                                        </template>


                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="hide-absolute-numbers">
                                                <span>Hide absolute numbers</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="hide-absolute-numbers"
                                                    x-model.number="poll.pollConfig.hideAbsoluteNumbers" class="switch"
                                                    role="switch" value="1" @change="" :disabled="false" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.hideAbsoluteNumbers, 'translate-x-0': !(poll.pollConfig.hideAbsoluteNumbers) }"></span>
                                            </div>

                                        </div>

                                    </div>
                                    <div class="space-y-5" x-show="activeTab === 3"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">
                                        <div>
                                            <div class="flex justify-between">
                                                <label for="poll_theme" class="label">
                                                    Theme
                                                </label>
                                            </div>

                                            <select id="poll_theme" name="pollTheme" class="select mt-1 py-2"
                                                x-model="selectedThemeId" @input="previewPollTheme()">
                                                <option :value="null">Default</option>
                                                <template x-for="theme in themesList">
                                                    <option :value="theme.id" x-text="theme.name"></option>
                                                </template>
                                            </select>

                                            <div class="mt-6">
                                                <label class="label">Preview</label>

                                                <div class="mt-1">
                                                    <div class="custom-page-bg">
                                                        <div class="px-4 py-4">
                                                            <template x-if="poll.theme.logo && poll.theme.logo.path">
                                                                <img class="h-16 mx-auto mb-3"
                                                                    :src="STATIC_URL + poll.theme.logo.path" />
                                                            </template>
                                                            <div
                                                                class="px-4 py-5 sm:p-6 rounded-md custom-box custom-box-primary">
                                                                <div class="flex justify-between items-start">
                                                                    <div>
                                                                        <div
                                                                            class="text-2xl text-gray-900 dark:text-gray-200 font-medium custom-title">
                                                                            Title</div>
                                                                        <div
                                                                            class="mt-1 text-gray-500 flex items-center custom-text">
                                                                            by Preview Generator</div>
                                                                    </div>
                                                                    <div>
                                                                        <button
                                                                            class="-mr-2 h-8 w-8 bg-white dark:bg-gray-800 rounded-full flex items-center justify-center text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 custom-field-input">


                                                                            <svg class="h-5 w-5 "
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path
                                                                                    d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z" />

                                                                            </svg>

                                                                        </button>
                                                                    </div>
                                                                </div>

                                                                <div class="mt-4 text-lg sm:text-base">
                                                                    <div class="flex items-center mt-3">
                                                                        <input id="check1" name="check1" type="checkbox"
                                                                            class="cursor-pointer focus:ring-0 focus:ring-offset-0 h-5 w-5 rounded disabled:opacity-50 text-indigo-600 dark:text-indigo-500 dark:bg-gray-700 dark:checked:bg-indigo-500 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 custom-checkbox" />
                                                                        <label for="check1"
                                                                            class="flex-grow cursor-pointer label-disabled:opacity-50 label-checked:text-indigo-600 dark:label-checked:text-indigo-400 custom-title">
                                                                            <span class="ml-2 block">Option 1</span>
                                                                        </label>
                                                                    </div>
                                                                    <div class="flex items-center mt-3">
                                                                        <input id="check2" name="check2" type="checkbox"
                                                                            class="cursor-pointer focus:ring-0 focus:ring-offset-0 h-5 w-5 rounded disabled:opacity-50 text-indigo-600 dark:text-indigo-500 dark:bg-gray-700 dark:checked:bg-indigo-500 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-800 custom-checkbox" />
                                                                        <label for="check2"
                                                                            class="flex-grow cursor-pointer label-disabled:opacity-50 label-checked:text-indigo-600 dark:label-checked:text-indigo-400 custom-title">
                                                                            <span class="ml-2 block">Option 2</span>
                                                                        </label>
                                                                    </div>
                                                                </div>

                                                                <div
                                                                    class="mt-6 sm:grid sm:grid-cols-2 sm:gap-6 sm:grid-flow-row-dense">
                                                                    <div>
                                                                        <button
                                                                            class="button w-full is-primary custom-button">Vote</button>
                                                                    </div>
                                                                    <div
                                                                        class="flex justify-between space-x-3 sm:space-x-6 mt-3 sm:mt-0">
                                                                        <button
                                                                            class="w-full custom-text trucate">Results</button>
                                                                        <!--button class="button is-light w-full custom-secondary-button-bg custom-secondary-button-text custom-secondary-button-border truncate">Share</button-->
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                            <div class="mt-6">
                                                <a class="link" href="/account/themes/" target="_blank">Create your own
                                                    theme &rarr;</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="space-y-5" x-show="activeTab === 4"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">

                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="send-email-notifications">
                                                <span>Send email notifications</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="send-email-notifications"
                                                    x-model.number="poll.pollConfig.sendNotifications" class="switch"
                                                    role="switch" value="1" @change="" :disabled="false" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.sendNotifications, 'translate-x-0': !(poll.pollConfig.sendNotifications) }"></span>
                                            </div>

                                        </div>



                                        <div class="flex items-center justify-between space-x-10">
                                            <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                for="send-webhooks">
                                                <span>Send webhooks</span>
                                            </label>

                                            <div class="relative leading-none">
                                                <input type="checkbox" id="send-webhooks"
                                                    x-model.number="poll.pollConfig.sendWebhooks" class="switch"
                                                    role="switch" value="1" @change="" :disabled="false" />
                                                <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                    class="switch-button"
                                                    :class="{ 'translate-x-5': poll.pollConfig.sendWebhooks, 'translate-x-0': !(poll.pollConfig.sendWebhooks) }"></span>
                                            </div>

                                        </div>


                                        <div class="text-gray-500 text-sm">
                                            Note: If you disable notifications at the account level, the settings here
                                            will have no effect.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4 flex sm:justify-end">
                                <button type="button" class="mt-0 w-full sm:w-auto button is-light"
                                    @click="cancelChanges(); open = false">
                                    Cancel
                                </button>






                                <button type="button"
                                    class="inline-flex justify-center items-center border border-transparent rounded-md shadow-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-offset-gray-800 w-full sm:w-auto button is-primary ml-3 px-4 py-2 text-sm"
                                    @click="saveChanges()" :disabled="isLoading || false">

                                    <span class="relative flex items-center justify-center">
                                        <template x-if="isLoading">
                                            <div class="flex justify-center">


                                                <svg class="animate-spin h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                    fill="none" viewBox="0 0 24 24">
                                                    <circle class="opacity-25" cx="12" cy="12" r="10"
                                                        stroke="currentColor" stroke-width="4"></circle>
                                                    <path class="opacity-75" fill="currentColor"
                                                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                    </path>
                                                </svg>

                                            </div>
                                        </template>
                                        <template x-if="!isLoading">
                                            <span class="flex items-center">
                                                <span>Save</span>
                                            </span>
                                        </template>
                                    </span>

                                </button>

                            </div>
                        </div>

                        <script>
                            function pollSettings() {
                                return {
                                    activeTab: 0,
                                    multipleChoiceType: 'unlimited',
                                    toggleVotingInterval: false,
                                    isLoading: false,
                                    selectedThemeId: null,
                                    themesList: [],
                                    theme: { logo: { path: null } },
                                    init() {
                                        if (this.poll.pollConfig.multipleChoiceMin) {
                                            if (this.poll.pollConfig.multipleChoiceMin === this.poll.pollConfig.multipleChoiceMax) {
                                                this.multipleChoiceType = 'exact'
                                            } else {
                                                this.multipleChoiceType = 'range'
                                            }
                                        }

                                        if (this.poll.pollConfig.votingInterval) {
                                            this.toggleVotingInterval = true
                                        }

                                        this.getThemesList()

                                        if (!this.poll.theme) {
                                            this.poll.theme = { id: null }
                                        }

                                        this.$watch('toggleVotingInterval', value => {
                                            if (value) {
                                                this.poll.pollConfig.votingInterval = 60
                                            } else {
                                                this.poll.pollConfig.votingInterval = null
                                            }
                                        })
                                    },
                                    async getThemesList() {
                                        const response = await strawpoll.fetchAPI('/users/@me/themes')

                                        if (!response.error) {
                                            this.themesList = strawpoll.toCamelCaseKeys(response.data)

                                            this.previewPollTheme()

                                            if (this.poll.theme) {
                                                this.selectedThemeId = this.poll.theme.id
                                            }
                                        }
                                    },
                                    previewPollTheme() {
                                        this.$nextTick(() => {
                                            this.theme = this.getThemeById(this.selectedThemeId)

                                            setCustomTheme(this.theme)

                                            this.poll.theme.id = this.theme.id
                                        })
                                    },
                                    getThemeById(themeId) {
                                        let theme = null

                                        if (themeId) {
                                            theme = this.themesList.find(theme => theme.id === themeId)
                                        }

                                        if (!theme) {
                                            if (document.querySelector("html").classList.contains("dark")) {
                                                theme = defaultThemeDark
                                            } else {
                                                theme = defaultThemeLight
                                            }
                                        }

                                        return theme
                                    },
                                    async saveChanges() {
                                        this.isLoading = true

                                        if (this.poll.pollConfig.isMultipleChoice) {
                                            if (this.multipleChoiceType === 'unlimited') {
                                                this.poll.pollConfig.multipleChoiceMin = 0
                                                this.poll.pollConfig.multipleChoiceMax = 0
                                            } else {
                                                // if (this.poll.pollConfig.multipleChoiceMin < 1) {
                                                // 	this.poll.pollConfig.multipleChoiceMin = 1 
                                                // }
                                                if (this.poll.pollConfig.multipleChoiceMin > this.poll.pollOptions.length) {
                                                    this.poll.pollConfig.multipleChoiceMin = this.poll.pollOptions.length
                                                }
                                                if (this.poll.pollConfig.multipleChoiceMax < 1) {
                                                    this.poll.pollConfig.multipleChoiceMax = 1
                                                }
                                                if (this.poll.pollConfig.multipleChoiceMax > this.poll.pollOptions.length) {
                                                    this.poll.pollConfig.multipleChoiceMax = this.poll.pollOptions.length
                                                }
                                                if (this.multipleChoiceType === 'exact') {
                                                    this.poll.pollConfig.multipleChoiceMin = this.poll.pollConfig.multipleChoiceMax
                                                }
                                                if (this.poll.pollConfig.multipleChoiceMin > this.poll.pollConfig.multipleChoiceMax) {
                                                    this.poll.pollConfig.multipleChoiceMin = this.poll.pollConfig.multipleChoiceMax
                                                }
                                            }
                                        }

                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id, {
                                            method: 'PUT',
                                            body: JSON.stringify(strawpoll.toSnakeCaseKeys(this.poll))
                                        })

                                        this.isLoading = false

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Successfully updated.' })
                                            this.open = false
                                            this.poll = strawpoll.toCamelCaseKeys(response)

                                            if ((this.$store.poll.pollConfig.maxPoints !== this.poll.pollConfig.maxPoints) || (this.$store.poll.pollConfig.hideOtherOptionResults !== this.poll.pollConfig.hideOtherOptionResults) || (this.$store.poll.theme && !this.poll.theme) || (this.poll.theme && (this.poll.theme.pageLayout === 'standalone' || (this.$store.poll.theme && this.$store.poll.theme.pageLayout === 'standalone')))) {
                                                window.location.reload()
                                            } else {
                                                this.$dispatch('update-poll', { poll: this.poll, i: this.index })
                                            }
                                        }
                                    },
                                    cancelChanges() {
                                        let theme = null

                                        if (this.$store.poll.theme) {
                                            theme = this.themesList.find(theme => theme.id === this.$store.poll.theme.id)
                                        }

                                        if (!theme) {
                                            if (document.querySelector("html").classList.contains("dark")) {
                                                theme = defaultThemeDark
                                            } else {
                                                theme = defaultThemeLight
                                            }
                                        }

                                        setCustomTheme(theme)
                                    }
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>

        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg',  }"
            @poll-duplication-checking-modal.window="index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4 flex justify-start items-center">
                                <svg class="h-6 w-6 text-blue-400"
                                    x-description="Heroicon name: solid/information-circle"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"
                                    aria-hidden="true">
                                    <path fill-rule="evenodd"
                                        d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                        clip-rule="evenodd"></path>
                                </svg>
                                <span class="ml-2">Duplication checking</span>
                            </div>
                            <div
                                class="px-4 pt-3 pb-2 sm:px-6 sm:py-4 sm:px-6 space-y-4 text-sm text-gray-700 dark:text-gray-400">
                                <div>You can choose between different types of vote duplication checking.</div>
                                <div><span class="font-semibold text-gray-500">IP-Address</span><br />Most secure method
                                    to ensure vote accuracy, but does not work if your voters share the same
                                    network/wifi (e.g. in schools, universities or workplaces).</div>
                                <div><span class="font-semibold text-gray-500">Browser Session</span><br />This method
                                    allows one vote per browser session. Choose this setting only if you are confident
                                    that your voters will not manipulate.</div>
                                <div><span class="font-semibold text-gray-500">None</span><br />This setting allows
                                    participants to vote multiple times. It is only recommended for testing or when
                                    participants also enter their name while voting.</div>
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false;">
                                    Close
                                </button>
                            </div>
                        </div>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-option-limits-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollOptionLimits()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4 flex justify-start items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path
                                        d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z" />

                                </svg>

                                <span class="ml-2">Option limits</span>
                            </div>
                            <div
                                class="px-4 pt-3 pb-2 sm:px-6 sm:py-4 sm:px-6 space-y-4 text-sm text-gray-700 dark:text-gray-400">
                                <div>
                                    You can set the maximum number of votes per option. When the maximum number is
                                    reached, participants can no longer vote for the respective option.
                                </div>

                                <div x-show="poll.pollOptions.length === 0" x-cloak>


                                    <div class="rounded-md bg-yellow-50 dark-bg-opacity-yellow p-4">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0">


                                                <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg"
                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                    <path fill-rule="evenodd"
                                                        d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                                        clip-rule="evenodd" />

                                                </svg>

                                            </div>
                                            <div class="ml-3">
                                                <div class="text-sm text-yellow-700 dark:text-gray-200">
                                                    <p>
                                                        Please enter your poll options first.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div class="space-y-4 divide-y divide-gray-200 dark:divide-gray-700"
                                    x-show="poll.pollOptions.length > 0" x-cloak>
                                    <div class="mt-3 pt-3 flex justify-between items-center">
                                        <span class="font-semibold">Global</span>
                                        <div class="flex space-x-2">
                                            <button class="button is-primary"
                                                @click="globalLimit--; if (globalLimit < 0) { globalLimit = 0 }">


                                                <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                    <path fill-rule="evenodd"
                                                        d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                                                        clip-rule="evenodd" />

                                                </svg>

                                            </button>
                                            <input class="input" style="max-width: 96px" type="number"
                                                x-model="globalLimit" />
                                            <button class="button is-primary" @click="globalLimit++">


                                                <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                    <path fill-rule="evenodd"
                                                        d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                                                        clip-rule="evenodd" />

                                                </svg>

                                            </button>
                                        </div>
                                    </div>

                                    <template x-for="(pollOption, i) in poll.pollOptions" :key="">
                                        <div class="mt-3 pt-3 flex justify-between items-center">
                                            <template x-if="pollOption.type === 'date'">
                                                <div class="flex items-center"
                                                    x-data="{ date: new Date(pollOption.date + 'T00:00:00').getTime() / 1000 }">
                                                    <div style="width: 70px;">
                                                        <div
                                                            class="bg-indigo-500 dark:bg-indigo-400 text-white text-center rounded py-1 font-bold">
                                                            <div x-text="formatEpoch(date, null, 'month')"
                                                                class="font-normal"></div>
                                                            <div x-text="formatEpoch(date, null, 'date')"></div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 80px;">
                                                        <div class="flex justify-center custom-title font-bold">
                                                            <span x-text="formatEpoch(date, null, 'day')"></span>
                                                        </div>
                                                        <div
                                                            class="font-normal text-gray-500 text-sm flex items-center justify-center custom-text">
                                                            <span>All-day</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>
                                            <template x-if="pollOption.type === 'time_range'">
                                                <div class="flex items-center">
                                                    <div style="width: 70px;">
                                                        <div
                                                            class="bg-indigo-500 dark:bg-indigo-400 text-white text-center rounded py-1 font-bold">
                                                            <div x-text="formatEpoch(pollOption.startTime, currentTimezone, 'month')"
                                                                class="font-normal"></div>
                                                            <div
                                                                x-text="formatEpoch(pollOption.startTime, currentTimezone, 'date')">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div style="width: 80px;">
                                                        <div class="flex justify-center font-bold">
                                                            <span
                                                                x-text="formatEpoch(pollOption.startTime, currentTimezone, 'day')"></span>
                                                        </div>
                                                        <div
                                                            class="font-normal text-gray-500 flex flex-col text-sm text-center">
                                                            <div
                                                                x-text="formatEpoch(pollOption.startTime, currentTimezone, 'time')">
                                                            </div>
                                                            <span class="" style="line-height: 3px;">-</span>
                                                            <div x-text="pollOption.endTime ? formatEpoch(pollOption.endTime, currentTimezone, 'time') : 'Open end'"
                                                                class="whitespace-nowrap"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </template>
                                            <template x-if="pollOption.type === 'text'">
                                                <div class="font-medium py-2 flex-grow" style="max-width: 50%">
                                                    <span x-text="pollOption.value"></span>
                                                </div>
                                            </template>
                                            <div class="flex space-x-2">
                                                <button class="button is-primary"
                                                    @click="pollOption.maxVotes--; if (pollOption.maxVotes < 0) { pollOption.maxVotes = 0 }">


                                                    <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                        <path fill-rule="evenodd"
                                                            d="M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                                                            clip-rule="evenodd" />

                                                    </svg>

                                                </button>
                                                <input class="input" style="max-width: 96px" type="number"
                                                    x-model="pollOption.maxVotes" />
                                                <button class="button is-primary" @click="pollOption.maxVotes++">


                                                    <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                        <path fill-rule="evenodd"
                                                            d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                                                            clip-rule="evenodd" />

                                                    </svg>

                                                </button>
                                            </div>
                                        </div>
                                    </template>

                                    <div class="mt-3 pt-3 text-gray-500 text-center">Note: A limit of &quot;0&quot;
                                        means &quot;unlimited&quot;.</div>
                                </div>
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4 flex sm:justify-end">
                                <button type="button" class="mt-0 w-full sm:w-auto button is-light"
                                    @click="open = false">
                                    Cancel
                                </button>
                                <button class="w-full sm:w-auto button is-primary ml-3" @click="savePoll()">
                                    Save
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollOptionLimits() {
                                return {
                                    previousPollOptions: null,
                                    globalLimit: null,
                                    currentTimezone: strawpoll.getTimezone(),
                                    init() {
                                        if (this.poll.pollMeta.timezone) {
                                            this.currentTimezone = this.poll.pollMeta.timezone
                                        }

                                        this.previousPollOptions = this.poll.pollOptions

                                        this.checkGlobalLimit()
                                        this.$watch('globalLimit', value => {
                                            this.setGlobalLimit()
                                        })
                                    },
                                    cancelChanges() {
                                        this.poll.pollOptions = this.previousPollOptions
                                    },
                                    checkGlobalLimit() {
                                        let limit = -1
                                        this.poll.pollOptions.forEach((option) => {
                                            if (limit === -1) {
                                                limit = option.maxVotes
                                            } else if (limit !== option.maxVotes) {
                                                limit = null
                                            }
                                        })
                                        if (limit !== null) {
                                            this.globalLimit = limit
                                        }
                                    },
                                    setGlobalLimit() {
                                        this.poll.pollOptions.forEach((option) => {
                                            option.maxVotes = this.globalLimit
                                        })
                                    },
                                    // async savePoll() {
                                    // 	const response = await strawpoll.fetchAPI('/polls/'+this.poll.id, {
                                    // 		method: 'PUT',
                                    // 		body: JSON.stringify(strawpoll.toSnakeCaseKeys(this.poll))
                                    // 	})

                                    // 	if (!response.error) {
                                    // 		this.$store.notification.show({ title: 'Successfully updated.' })
                                    // 		this.$dispatch('update-poll', { poll: strawpoll.toCamelCaseKeys(response), i: this.index })
                                    // 		this.open = false
                                    // 	}
                                    // },
                                    savePoll() {
                                        this.$dispatch('update-poll', { poll: strawpoll.toCamelCaseKeys(this.poll), i: this.index, convertOptions: true })
                                        this.open = false
                                    },
                                    formatEpoch(epoch, timezone, type) {
                                        epoch = parseInt(epoch)
                                        if (parseInt(epoch) === 0) return 0

                                        let format

                                        if (type === 'month') {
                                            format = 'MMM'
                                        } else if (type === 'date') {
                                            format = 'D'
                                        } else if (type === 'day') {
                                            format = 'ddd'
                                        } else if (type === 'time') {
                                            format = 'HH:mm'
                                            if (strawpoll.getClockType() === '12h') format = 'h:mm A'
                                        }

                                        if (timezone) {
                                            return dayjs(new Date(epoch * 1000)).tz(timezone).format(format)
                                        } else {
                                            return dayjs(new Date(epoch * 1000)).format(format)
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-pincode-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollPincode()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 py-3 sm:px-6 sm:py-4 flex items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path fill-rule="evenodd"
                                        d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z"
                                        clip-rule="evenodd" />

                                </svg>

                                <span class="ml-2">PIN Code</span>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4">
                                <template x-if="poll.pinCode">
                                    <div class="space-y-4 text-center divide-y divide-gray-200 dark:divide-gray-700">
                                        <div class="text-center space-y-4">
                                            <div class="py-2 text-3xl font-extrabold bg-white dark:bg-gray-700 border-2 border-dashed border-gray-300 dark:border-gray-700 tracking-widest rounded-lg"
                                                x-text="poll.pinCode">
                                            </div>

                                            <div>
                                                <div class="text-md font-medium text-gray-500">How to use this PIN code:
                                                </div>

                                                <ul class="text-left max-w-sm mx-auto mt-4 list-inside list-decimal">
                                                    <li>
                                                        <div class="inline-flex items-center">
                                                            <span>Visit </span>
                                                            <a class="ml-2 font-medium bg-white dark:bg-gray-900 flex items-center border border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500 rounded-full pl-3 pr-5 py-1"
                                                                href="https://strawpoll.live/" target="_blank">


                                                                <svg class="h-3 w-3 text-gray-500"
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                    <path fill-rule="evenodd"
                                                                        d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                                                                        clip-rule="evenodd" />

                                                                </svg>

                                                                <span class="ml-2"><span
                                                                        class="text-gray-500">https://</span>strawpoll.live</span>
                                                            </a>
                                                        </div>
                                                    </li>

                                                    <li class="mt-2">Enter the PIN code</li>

                                                    <li class="mt-3">Vote in the poll</li>
                                                </ul>
                                            </div>
                                        </div>

                                        <div class="pt-4 space-y-4">
                                            <div class="text-gray-500 text-sm">
                                                <div>
                                                    This PIN will expire after 30 days.
                                                </div>
                                                <!--div class="mb-4">
							As an admin, you can remove and recreate PINs at any time.
						</div-->
                                            </div>

                                            <div class="flex justify-center">
                                                <button type="button" class="button is-primary"
                                                    @click="removePin()">Remove PIN code</button>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <template x-if="!poll.pinCode">
                                    <div class="max-w-sm mx-auto text-center">
                                        <h3 class="text-lg font-medium">Easy access to the poll</h3>

                                        <div class="mt-1 text-gray-500 text-sm">
                                            PIN codes make it easy to share a poll with people who see your shared
                                            screen, such as in the classroom, at conferences, or in web meetings.
                                        </div>

                                        <div class="mt-4 flex justify-center">
                                            <div class="button is-primary" @click="generatePin()">Generate PIN code
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full mt-3" @click="open = false;">
                                    Close
                                </button>
                            </div>
                            <template x-if="open">
                                <div x-data="initPin()"></div>
                            </template>
                        </div>

                        <script>
                            function initPin() {
                                return {
                                    init() {
                                        if (!this.poll.pinCode) {
                                            // this.generatePin()
                                        }
                                    }
                                }
                            }
                            function pollPincode() {
                                return {
                                    async generatePin() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/pin_code', {
                                            method: 'POST',
                                        })

                                        if (!response.error) {
                                            this.poll.pinCode = response.code
                                            this.$dispatch('update-poll', { poll: this.poll, i: this.index })
                                        }
                                    },
                                    async removePin() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/pin_code', {
                                            method: 'DELETE',
                                        })

                                        if (!response.error) {
                                            this.poll.pinCode = null
                                            this.$dispatch('update-poll', { poll: this.poll, i: this.index })
                                            this.$store.notification.show({ title: 'Successfully removed PIN.' })
                                        }
                                    }
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-export-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="exportModal()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4">
                                Export results
                            </div>
                            <div class="px-4 py-2 sm:px-6 space-y-8">
                                <!--div class="text-gray-500">
			This feature is currently reworked and will be available again shortly. Please be patient!
		</div-->

                                <div x-show="exports.length > 0">
                                    <table class="min-w-full divide-y divide-gray-300 dark:divide-gray-700">
                                        <thead>
                                            <tr>
                                                <th scope="col"
                                                    class="pl-0 py-3.5 pr-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-200">
                                                    Date
                                                </th>
                                                <th scope="col"
                                                    class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-200">
                                                    Type
                                                </th>
                                                <!--th scope="col" class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-200">
							# Participants
						</th-->
                                                <th scope="col"
                                                    class="py-3.5 px-3 text-left text-sm font-semibold text-gray-900 dark:text-gray-200">
                                                    Link
                                                </th>
                                                <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6 md:pr-0">
                                                    <span class="sr-only">Delete</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                            <template x-for="ex in exports" :key="ex.id">
                                                <tr>
                                                    <td class="whitespace-nowrap pl-0 py-4 pr-3 text-sm font-medium text-gray-900 dark:text-gray-200"
                                                        x-text="dayjs(ex.createdAt * 1000).tz(strawpoll.getTimezone()).format('LLL')">
                                                    </td>
                                                    <td class="whitespace-nowrap py-4 px-3 text-sm text-gray-500"
                                                        x-text="ex.type"></td>
                                                    <!--td class="whitespace-nowrap py-4 px-3 text-sm text-gray-500"
								x-text="ex.participantCount"></td-->
                                                    <td class="whitespace-nowrap py-4 px-3 text-sm text-gray-500">
                                                        <div x-show="!ex.generatedAt" class="flex items-center">
                                                            <svg class="animate-spin h-5 w-5 text-gray-500"
                                                                xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                viewBox="0 0 24 24">
                                                                <circle class="opacity-25" cx="12" cy="12" r="10"
                                                                    stroke="currentColor" stroke-width="4"></circle>
                                                                <path class="opacity-75" fill="currentColor"
                                                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                                </path>
                                                            </svg>
                                                        </div>
                                                        <a x-show="ex.generatedAt"
                                                            class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-500"
                                                            :href="STATIC_URL + ex.path" target="_blank">Download</a>
                                                    </td>
                                                    <td
                                                        class="relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 md:pr-0">
                                                        <button type="button" @click="deletePollExport(ex.id)"
                                                            class="text-red-500 hover:text-red-700">


                                                            <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                                fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                <path fill-rule="evenodd"
                                                                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                                    clip-rule="evenodd" />

                                                            </svg>

                                                        </button>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>

                                <div x-show="exports.length === 0">
                                    There are no exports for this poll yet.
                                </div>

                                <div>
                                    <button type="button" class="button is-primary"
                                        @click="generatePollExport('xlsx')">Generate .xlsx</button>
                                </div>
                            </div>
                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false;">
                                    Close
                                </button>
                            </div>
                        </div>

                        <script>
                            function exportModal() {
                                return {
                                    exports: [],
                                    init() {
                                        this.getPollExports()
                                    },
                                    async generatePollExport(type) {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/exports', {
                                            method: 'POST',
                                            body: JSON.stringify(strawpoll.toSnakeCaseKeys({
                                                type: type,
                                                timezone: strawpoll.getTimezone()
                                            }))
                                        })

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Export successfully queued. It will be available for download shortly.', description: '' })
                                            this.getPollExports()
                                        }
                                    },
                                    async getPollExports() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/exports')

                                        if (!response.error) {
                                            this.exports = strawpoll.toCamelCaseKeys(response.data)

                                            let pendingCount = 0

                                            this.exports.forEach((ex) => {
                                                if (!ex.generatedAt) pendingCount++
                                            })

                                            if (pendingCount > 0) {
                                                setTimeout(() => { this.getPollExports() }, 2000);
                                            }
                                        }
                                    },
                                    async deletePollExport(id) {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/exports/' + id, {
                                            method: 'DELETE',
                                        })

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Export successfully deleted.', description: '' })
                                            this.getPollExports()
                                        }
                                    }
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>

        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-invite-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollInvite()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4 flex justify-start items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path
                                        d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z" />

                                </svg>

                                <span class="ml-2">Invite participants</span>
                            </div>
                            <div class="px-4 py-2 sm:px-6">
                                <div>
                                    <div class="sm:hidden mt-2">
                                        <label for="tabs" class="sr-only">Select a tab</label>
                                        <select id="tabs" name="tabs" class="select" x-model.number="activeTab">
                                            <option :value="0">Email</option>

                                            <option :value="1">Manual</option>
                                        </select>
                                    </div>
                                    <div class="hidden sm:block">
                                        <div class="border-b border-gray-200 dark:border-gray-700">
                                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                                <button type="button" @click="activeTab = 0"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 0, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 0) }"
                                                    aria-current="page">
                                                    Email
                                                </button>

                                                <button type="button" @click="activeTab = 1"
                                                    class="whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm"
                                                    :class="{ 'border-indigo-500 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400': activeTab === 1, 'border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300' : !(activeTab === 1) }">
                                                    Manual
                                                </button>
                                            </nav>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-6" style="min-height: 160px;">
                                    <div class="space-y-5" x-show="activeTab === 0"
                                        x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">
                                        <div class="space-y-3">
                                            <div>
                                                <label class="label">Email Address(es)</label>
                                                <textarea class="textarea mt-1" rows="3" x-model="emailAddresses"
                                                    placeholder="Enter emails (comma separated)"></textarea>
                                            </div>
                                            <div x-show="showMessage" class="space-y-3">
                                                <div>
                                                    <label class="label">Message <span
                                                            class="text-gray-500">(optional)</span></label>
                                                    <textarea class="textarea mt-1" rows="3"
                                                        x-model="message"></textarea>
                                                </div>
                                            </div>
                                            <div class="grid grid-cols-1 gap-3 sm:flex sm:justify-between">
                                                <button type="button" @click="showMessage = !showMessage"
                                                    class="button is-light">


                                                    <svg class="h-5 w-5 -ml-1 mr-2 text-gray-400"
                                                        xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                                        viewBox="0 0 20 20" stroke="">
                                                        <path fill-rule="evenodd"
                                                            d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z"
                                                            clip-rule="evenodd" />

                                                    </svg>

                                                    <span>Customize Email</span>
                                                </button>






                                                <button type="button"
                                                    class="inline-flex justify-center items-center border border-transparent rounded-md shadow-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-offset-gray-800 px-4 py-2 text-sm"
                                                    @click="inviteParticipants()()"
                                                    :disabled="isInviteParticipantsLoading || false">

                                                    <span class="relative flex items-center justify-center">
                                                        <template x-if="isInviteParticipantsLoading">
                                                            <div class="flex justify-center">


                                                                <svg class="animate-spin h-5 w-5 "
                                                                    xmlns="http://www.w3.org/2000/svg" fill="none"
                                                                    viewBox="0 0 24 24">
                                                                    <circle class="opacity-25" cx="12" cy="12" r="10"
                                                                        stroke="currentColor" stroke-width="4"></circle>
                                                                    <path class="opacity-75" fill="currentColor"
                                                                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                                    </path>
                                                                </svg>

                                                            </div>
                                                        </template>
                                                        <template x-if="!isInviteParticipantsLoading">
                                                            <span class="flex items-center">


                                                                <svg class="h-5 w-5 -ml-1 mr-2 "
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                    <path
                                                                        d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                                                                    <path
                                                                        d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />

                                                                </svg>

                                                                <span>Send invitation</span>
                                                            </span>
                                                        </template>
                                                    </span>

                                                </button>

                                            </div>

                                            <template x-if="errorList.length > 0">
                                                <div class="text-red-500 space-y-3">
                                                    <div>The following input could not be parsed:</div>
                                                    <ul class="list-disc list-inside">
                                                        <template x-for="(string, i) in errorList">
                                                            <li><span x-text="string"></span></li>
                                                        </template>
                                                    </ul>
                                                    <div>Please correct your input and try again.</div>
                                                </div>
                                            </template>

                                            <div class="pt-3 text-gray-500 text-sm">
                                                Remaining quota: <span x-text="remainingQuota"></span> / 50
                                            </div>

                                            <div class="pt-3 text-gray-500 text-center text-sm">
                                                <!-- %= include '_components/ui/icon', _icon => 'exclamation', _custom_class => 'text-yellow-500 inline' -->
                                                <template x-if="selfSendEmails">
                                                    <span>For privacy reasons, you must send the invitation messages
                                                        yourself. When you enter the recipients, we will generate a
                                                        message for you.</span>
                                                </template>
                                                <template x-if="!selfSendEmails">
                                                    <span>Hint: Your name and email address will be added to the
                                                        invitation email and its &quot;reply-to&quot; field.</span>
                                                </template>
                                            </div>
                                        </div>
                                        <div class="pt-4" x-show="emailInvites.length > 0">
                                            <div
                                                class="overflow-scroll sm:rounded-lg border border-gray-200 dark:border-gray-700">
                                                <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                    <thead class="bg-gray-50 dark:bg-gray-900">
                                                        <tr>
                                                            <th scope="col"
                                                                class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                                Email Address
                                                            </th>
                                                            <th scope="col"
                                                                class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                                Email Status
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <template x-for="(invite, i) in emailInvites">
                                                            <tr
                                                                :class="{ 'bg-white dark:bg-gray-800': i % 2 === 0, 'bg-gray-50 dark:bg-gray-800': i % 2 !== 0 }">
                                                                <td
                                                                    class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200">
                                                                    <div class="flex items-center">
                                                                        <span x-text="invite.email"></span>
                                                                        <span x-show="invite.status === 'used'"
                                                                            class="ml-1 text-indigo-500">


                                                                            <svg class="h-5 w-5 "
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="none" viewBox="0 0 24 24">
                                                                                <path fill-rule="evenodd"
                                                                                    clip-rule="evenodd"
                                                                                    d="M2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12ZM15.6103 10.1859C15.8511 9.84887 15.773 9.38046 15.4359 9.1397C15.0989 8.89894 14.6305 8.97701 14.3897 9.31407L11.1543 13.8436L9.53033 12.2197C9.23744 11.9268 8.76256 11.9268 8.46967 12.2197C8.17678 12.5126 8.17678 12.9874 8.46967 13.2803L10.7197 15.5303C10.8756 15.6862 11.0921 15.7656 11.3119 15.7474C11.5316 15.7293 11.7322 15.6153 11.8603 15.4359L15.6103 10.1859Z"
                                                                                    fill="currentColor" />

                                                                            </svg>

                                                                        </span>
                                                                    </div>
                                                                </td>
                                                                <td
                                                                    class="px-3 py-4 whitespace-nowrap text-sm text-gray-500 flex items-center justify-between">
                                                                    <div class="whitespace-nowrap flex items-center">
                                                                        <span
                                                                            x-show="invite.email_status === 'pending' || invite.email_status === 'validated'"
                                                                            class="mr-1">
                                                                            <svg class="animate-spin h-5 w-5 text-gray-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="none" viewBox="0 0 24 24">
                                                                                <circle class="opacity-25" cx="12"
                                                                                    cy="12" r="10" stroke="currentColor"
                                                                                    stroke-width="4"></circle>
                                                                                <path class="opacity-75"
                                                                                    fill="currentColor"
                                                                                    d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                                                </path>
                                                                            </svg>
                                                                        </span>
                                                                        <span x-show="invite.email_status === 'sent'"
                                                                            class="mr-1">


                                                                            <svg class="h-5 w-5 text-green-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path fill-rule="evenodd"
                                                                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                                                    clip-rule="evenodd" />

                                                                            </svg>

                                                                        </span>
                                                                        <span
                                                                            x-show="invite.email_status === 'duplicate'"
                                                                            class="mr-1">


                                                                            <svg class="h-5 w-5 text-yellow-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path fill-rule="evenodd"
                                                                                    d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                                                                    clip-rule="evenodd" />

                                                                            </svg>

                                                                        </span>
                                                                        <span x-show="invite.email_status === 'invalid'"
                                                                            class="mr-1">


                                                                            <svg class="h-5 w-5 text-red-500"
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path fill-rule="evenodd"
                                                                                    d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z"
                                                                                    clip-rule="evenodd" />

                                                                            </svg>

                                                                        </span>
                                                                        <span
                                                                            x-text="translate['email_statuses.' + invite.email_status]"></span>
                                                                    </div>
                                                                    <div class="flex items-center">
                                                                        <button type="button" class="text-red-500"
                                                                            @click="deleteInvite(invite)">


                                                                            <svg class="h-5 w-5 "
                                                                                xmlns="http://www.w3.org/2000/svg"
                                                                                fill="currentColor" viewBox="0 0 20 20"
                                                                                stroke="">
                                                                                <path fill-rule="evenodd"
                                                                                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                                                    clip-rule="evenodd" />

                                                                            </svg>

                                                                        </button>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </template>
                                                        <tr class="border-t border-gray-200 dark:border-gray-700"
                                                            :class="{ 'bg-white dark:bg-gray-900' : invites.length % 2 === 0, 'bg-gray-50 dark:bg-gray-800': invites.length % 2 !== 0 }">
                                                            <td
                                                                class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200">
                                                                Summary
                                                            </td>
                                                            <td
                                                                class="px-3 py-4 whitespace-nowrap text-sm text-gray-500 flex items-center">


                                                                <svg class="h-5 w-5 text-green-500 mr-1"
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                    <path fill-rule="evenodd"
                                                                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                                        clip-rule="evenodd" />

                                                                </svg>

                                                                <span x-text="stats.sent"></span> / <span
                                                                    x-text="stats.total"></span>
                                                            </td>
                                                            <!--td class="px-3 py-4 whitespace-nowrap text-sm text-gray-500">
									<span x-text="stats.voted"></span> / <span x-text="stats.total"></span>
								</td-->
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <div x-show="activeTab === 1" x-transition:enter="transition ease-out duration-100"
                                        x-transition:enter-start="transform opacity-0"
                                        x-transition:enter-end="transform opacity-100">
                                        <template x-if="poll.pollConfig.duplicationChecking === 'token'">
                                            <div class="space-y-5">
                                                <div class="text-sm">
                                                    Each participant needs a unique code to be able to vote. You can
                                                    generate and distribute the invitation codes yourself. Each code can
                                                    be used only once.
                                                </div>

                                                <div>
                                                    <label class="label">Issue new code</label>
                                                    <div class="mt-1 flex items-center space-x-3">
                                                        <input type="number" class="input" x-model="tokenCount"
                                                            placeholder="Number of codes">
                                                        <select x-model="tokenType" class="select">
                                                            <option value="letters-6">6-letter code</option>
                                                            <option value="letters-8">8-letter code</option>
                                                            <option value="uuid">Unique Identifier</option>
                                                        </select>






                                                        <button type="button"
                                                            class="inline-flex justify-center items-center border border-transparent rounded-md shadow-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-offset-gray-800 px-4 py-2 text-sm"
                                                            @click="generateTokens()"
                                                            :disabled="isTokensLoading || false">

                                                            <span class="relative flex items-center justify-center">
                                                                <template x-if="isTokensLoading">
                                                                    <div class="flex justify-center">


                                                                        <svg class="animate-spin h-5 w-5 "
                                                                            xmlns="http://www.w3.org/2000/svg"
                                                                            fill="none" viewBox="0 0 24 24">
                                                                            <circle class="opacity-25" cx="12" cy="12"
                                                                                r="10" stroke="currentColor"
                                                                                stroke-width="4"></circle>
                                                                            <path class="opacity-75" fill="currentColor"
                                                                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                                                                            </path>
                                                                        </svg>

                                                                    </div>
                                                                </template>
                                                                <template x-if="!isTokensLoading">
                                                                    <span class="flex items-center">
                                                                        <span>Generate</span>
                                                                    </span>
                                                                </template>
                                                            </span>

                                                        </button>


                                                    </div>
                                                    <div class="mt-1 text-sm">
                                                        Remaining quota: <span x-text="remainingQuota"></span> / 50
                                                    </div>
                                                </div>

                                                <div class="pt-4" x-show="tokenInvites.length > 0">
                                                    <div
                                                        class="overflow-hidden overflow-x-auto sm:rounded-lg border border-gray-200 dark:border-gray-700">
                                                        <table
                                                            class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                                            <thead class="bg-gray-50 dark:bg-gray-900">
                                                                <tr>
                                                                    <th scope="col"
                                                                        class="w-full px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                                        Codes
                                                                    </th>
                                                                    <th scope="col"
                                                                        class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap">
                                                                        Actions
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr
                                                                    class="border-b border-gray-200 dark:border-gray-700">
                                                                    <td colspan="2" class="text-center text-sm p-2">
                                                                        <button type="button" class="link"
                                                                            @click="showTokenList = !showTokenList">Show/Hide
                                                                            list</button>
                                                                    </td>
                                                                </tr>
                                                                <template x-for="(invite, i) in tokenInvites">
                                                                    <tr :class="{ 'bg-white dark:bg-gray-800': i % 2 === 0, 'bg-gray-50 dark:bg-gray-800': i % 2 !== 0 }"
                                                                        x-show="showTokenList" x-cloak>
                                                                        <td
                                                                            class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200">
                                                                            <span
                                                                                :class="{ 'line-through text-gray-500': invite.status === 'used' }"
                                                                                x-text="invite.unique_code"></span>
                                                                            <div>
                                                                                <button type="button"
                                                                                    @click="$clipboard(invite.unique_code); $store.notification.show({ title: 'Successfully copied.' })"
                                                                                    class="link">
                                                                                    <span>Copy code</span>
                                                                                </button>
                                                                                <span class="text-gray-500">|</span>
                                                                                <button type="button"
                                                                                    @click="$clipboard(poll.url + '?token=' + invite.unique_code); $store.notification.show({ title: 'Successfully copied.' })"
                                                                                    class="link">
                                                                                    <span>Copy link</span>
                                                                                </button>
                                                                            </div>
                                                                        </td>
                                                                        <td
                                                                            class="px-3 py-4 whitespace-nowrap text-sm text-gray-500 flex items-center justify-center">
                                                                            <button type="button" class="text-red-500"
                                                                                @click="deleteInvite(invite)">
                                                                                <span x-tooltip="Revoke">


                                                                                    <svg class="h-5 w-5 "
                                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                                        fill="currentColor"
                                                                                        viewBox="0 0 20 20" stroke="">
                                                                                        <path fill-rule="evenodd"
                                                                                            d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                                                            clip-rule="evenodd" />

                                                                                    </svg>

                                                                                </span>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </template>
                                                                <tr class="border-t border-gray-200 dark:border-gray-700"
                                                                    :class="{ 'bg-white dark:bg-gray-900' : invites.length % 2 === 0, 'bg-gray-50 dark:bg-gray-800': invites.length % 2 !== 0 }">
                                                                    <td
                                                                        class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200">
                                                                        Summary
                                                                    </td>
                                                                    <td
                                                                        class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-500 flex items-center justify-center">
                                                                        <span x-text="tokenInvites.length"></span>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <div class="mt-5">
                                                        <div class="text-sm text-gray-500">
                                                            For easier management, you can copy and paste the list of
                                                            codes or links into a spreadsheet.
                                                        </div>
                                                        <div class="mt-3">
                                                            <button type="button"
                                                                @click="$clipboard(tokenTable); $store.notification.show({ title: 'Successfully copied.' })"
                                                                class="button is-light">


                                                                <svg class="h-5 w-5 -ml-1 mr-2 "
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                    <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                                                    <path
                                                                        d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" />

                                                                </svg>

                                                                <span>Copy all codes to clipboard</span>
                                                            </button>
                                                        </div>
                                                        <div class="mt-3">
                                                            <button type="button"
                                                                @click="$clipboard(linkTable); $store.notification.show({ title: 'Successfully copied.' })"
                                                                class="button is-light">


                                                                <svg class="h-5 w-5 -ml-1 mr-2 "
                                                                    xmlns="http://www.w3.org/2000/svg"
                                                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                                    <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                                                    <path
                                                                        d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" />

                                                                </svg>

                                                                <span>Copy all links to clipboard</span>
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </template>

                                        <template x-if="poll.pollConfig.duplicationChecking !== 'token'">
                                            <div class="space-y-3">
                                                <div class="text-lg font-medium">
                                                    Secure Voting
                                                </div>
                                                <div class="text-sm">
                                                    Please change the <span class="font-semibold">Voting
                                                        Permissions</span> to <span class="italic">"One response per
                                                        unique code"</span> to enable secure voting.
                                                </div>

                                                <div class="text-sm">
                                                    If you just want to share this poll without using unique codes, you
                                                    can simply share it. <button type="button" class="link"
                                                        @click="$dispatch('poll-share-modal', { poll: poll })">Share
                                                        this poll</button>
                                                </div>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light" @click="open = false">
                                    Close
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollInvite() {
                                return {
                                    activeTab: 0,
                                    emailAddresses: '',
                                    subject: '',
                                    message: '',
                                    errorList: [],
                                    showMessage: false,
                                    invitations: [],
                                    invites: [],
                                    emailInvites: [],
                                    tokenInvites: [],
                                    tokenTable: null,
                                    linkTable: null,
                                    isTokensLoading: false,
                                    isInviteParticipantsLoading: false,
                                    stats: {
                                        pending: 0,
                                        validated: 0,
                                        invalid: 0,
                                        sent: 0,
                                        delivered: 0,
                                        voted: 0,
                                        total: 0
                                    },
                                    tokenCount: null,
                                    tokenType: 'letters-8',
                                    translate: {
                                        'email_statuses.pending': 'pending',
                                        'email_statuses.duplicate': 'duplicate',
                                        'email_statuses.validated': 'validated',
                                        'email_statuses.invalid': 'invalid',
                                        'email_statuses.sent': 'sent',
                                        'email_statuses.delivered': 'delivered',
                                        'voting_statuses.open': 'open',
                                        'voting_statuses.voted': 'voted',
                                    },
                                    selfSendEmails: false,
                                    showTokenList: true,
                                    remainingQuota: '50',
                                    init() {
                                        this.getInvites()
                                    },
                                    async generateTokens() {
                                        if (!this.tokenCount) {
                                            this.tokenCount = 1
                                        }

                                        this.isTokensLoading = true

                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/invites', {
                                            method: 'POST',
                                            body: JSON.stringify({ tokens: this.tokenCount, type: this.tokenType })
                                        })

                                        this.isTokensLoading = false

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Successfully created unique codes.' })
                                            this.getInvites()
                                        }
                                    },
                                    async inviteParticipants() {
                                        const re = /([a-zA-Z0-9._+-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi;

                                        const emailList = []
                                        this.errorList = []

                                        if (!this.emailAddresses) {
                                            this.errorList.push('Missing required data.')
                                            return
                                        }

                                        this.emailAddresses.split(/[\n,;]+/).forEach((email) => {
                                            const match = email.match(re)
                                            if (email.match(re)) {
                                                emailList.push(match[0])
                                            } else {
                                                if (email) {
                                                    this.errorList.push(email)
                                                }
                                            }
                                        })

                                        if (emailList.length == 0 || this.errorList.length > 0) {
                                            return
                                        }

                                        if (this.selfSendEmails) {
                                            let mailToString = 'mailto:no-reply@strawpoll.com?bcc=' + emailList.join(",") + '&subject=Invitation: {title}&body=Hi,%0DI would like to ask you to participate in this StrawPoll:%0D%0DTitle: ' + this.poll.title + '%0D%0DLink: https://strawpoll.com/polls/' + this.poll.id
                                            if (this.message) {
                                                mailToString += '%0D%0DMessage: ' + this.message
                                            }

                                            window.location.href = mailToString
                                        } else {
                                            this.isInviteParticipantsLoading = true

                                            const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/invites', {
                                                method: 'POST',
                                                body: JSON.stringify({ emails: emailList, message: this.message, subject: this.subject })
                                            })

                                            this.isInviteParticipantsLoading = false

                                            if (!response.error) {
                                                this.$store.notification.show({ title: 'Successfully created email invitations.' })
                                                this.getInvites()
                                            }
                                        }
                                    },
                                    async deleteInvite(invite) {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/invites/' + invite.id, {
                                            method: 'DELETE'
                                        })

                                        if (!response.error) {
                                            this.getInvites()
                                        }
                                    },
                                    async getInvites() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/invites')

                                        if (!response.error) {
                                            this.invites = response.data
                                            this.emailInvites = this.invites.filter(invite => invite.email)
                                            this.tokenInvites = this.invites.filter(invite => invite.email === null)

                                            this.stats = {
                                                pending: 0,
                                                validated: 0,
                                                invalid: 0,
                                                sent: 0,
                                                delivered: 0,
                                                voted: 0,
                                                total: 0
                                            }

                                            this.emailInvites.forEach((invite) => {
                                                if (invite.email_status === 'pending') this.stats.pending++;
                                                if (invite.email_status === 'validated') this.stats.validated++;
                                                if (invite.email_status === 'sent' || invite.email_status === 'delivered') this.stats.sent++;
                                                if (invite.email_status === 'delivered') this.stats.delivered++;
                                                // if (invite.vote_status === 'voted') this.stats.voted++;
                                                this.stats.total++;
                                            })

                                            this.tokenTable = this.tokenInvites.map(invite => invite.unique_code).join("\r\n")
                                            this.linkTable = this.tokenInvites.map(invite => this.poll.url + '?token=' + invite.unique_code).join("\r\n")

                                            if (this.stats.pending > 0 || this.stats.validated > 0) {
                                                setTimeout(() => { this.getInvites() }, 2000);
                                            }

                                            // if (this.invites.length > 100) {
                                            // 	this.showTokenList = false
                                            // }

                                            this.remainingQuota = response.quota.remaining
                                        }
                                    }
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-reset-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollReset()" class="px-4 pt-5 pb-4 sm:p-6">
                            <div class="sm:flex sm:items-start">
                                <div
                                    class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                    <svg class="h-6 w-6 text-red-600" x-description="Heroicon name: outline/exclamation"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                        </path>
                                    </svg>
                                </div>
                                <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"
                                        id="modal-title">
                                        Reset poll
                                    </h3>
                                    <div class="mt-2">
                                        <p class="text-sm text-gray-500">
                                            Are you sure you want to reset this poll? All votes will be removed. This
                                            action cannot be undone.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                                <button type="button"
                                    class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"
                                    @click="resetPoll();">
                                    Reset
                                </button>
                                <button type="button"
                                    class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
                                    @click="open = false">
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollReset() {
                                return {
                                    async resetPoll() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/results', {
                                            method: 'DELETE'
                                        })

                                        if (!response.error) {
                                            this.poll = strawpoll.toCamelCaseKeys(response)
                                            this.$dispatch('update-poll', { poll: this.poll, i: this.index })

                                            this.$store.notification.show({ title: 'Successfully reset.' })
                                            this.open = false
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>

        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-delete-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollDelete()" class="px-4 pt-5 pb-4 sm:p-6">
                            <div class="sm:flex sm:items-start">
                                <div
                                    class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                    <svg class="h-6 w-6 text-red-600" x-description="Heroicon name: outline/exclamation"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                        </path>
                                    </svg>
                                </div>
                                <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"
                                        id="modal-title">
                                        Delete poll
                                    </h3>
                                    <div class="mt-2">
                                        <p class="text-sm text-gray-500">
                                            Are you sure you want to delete this poll? All associated data, including
                                            votes, will be removed. This action cannot be undone.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                                <button type="button"
                                    class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"
                                    @click="deletePoll();">
                                    Delete
                                </button>
                                <button type="button"
                                    class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
                                    @click="open = false">
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollDelete() {
                                return {
                                    async deletePoll() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id, {
                                            method: 'DELETE'
                                        })

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Delete successful.', description: '' })
                                            this.$dispatch('delete-poll', { poll: this.poll, i: this.index })
                                            this.open = false
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-workspace-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollWorkspaceModal()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 py-3 sm:px-6 sm:py-4 flex items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path fill-rule="evenodd"
                                        d="M15.988 3.012A2.25 2.25 0 0118 5.25v6.5A2.25 2.25 0 0115.75 14H13.5V7A2.5 2.5 0 0011 4.5H8.128a2.252 2.252 0 011.884-1.488A2.25 2.25 0 0112.25 1h1.5a2.25 2.25 0 012.238 2.012zM11.5 3.25a.75.75 0 01.75-.75h1.5a.75.75 0 01.75.75v.25h-3v-.25z"
                                        clip-rule="evenodd" />
                                    <path fill-rule="evenodd"
                                        d="M2 7a1 1 0 011-1h8a1 1 0 011 1v10a1 1 0 01-1 1H3a1 1 0 01-1-1V7zm2 3.25a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75zm0 3.5a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75z"
                                        clip-rule="evenodd" />


                                </svg>

                                <span class="ml-2">Workspace</span>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4 space-y-3">
                                <div class="text-sm text-gray-500 dark:text-gray-400">
                                    Choose a workspace to make your poll manageable for team members. If you do not see
                                    a workspace in the list, please create one first.
                                </div>

                                <div>
                                    <label class="label" for="workspace">
                                        Workspace
                                    </label>
                                    <select id="workspace" name="workspace" class="mt-1 select"
                                        x-model="selectedWorkspace">
                                        <option value="" disabled>Select a workspace</option>
                                        <template x-for="(workspace, i) in workspaceList">
                                            <option :value="workspace.id" x-text="workspace.name"></option>
                                        </template>
                                    </select>
                                </div>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4 flex sm:justify-end">
                                <button type="button" class="mt-0 w-full sm:w-auto button is-light"
                                    @click="open = false">
                                    Cancel
                                </button>
                                <button type="button" class="button is-primary w-full sm:w-auto button is-primary ml-3"
                                    @click="savePollWorkspace()">
                                    Save
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollWorkspaceModal() {
                                return {
                                    selectedWorkspace: '',
                                    workspaceList: [],
                                    isLoadingList: false,
                                    init() {
                                        this.getWorkspaceList()
                                        if (this.poll.workspace) {
                                            this.selectedWorkspace = this.poll.workspace.id
                                        }
                                    },
                                    async getWorkspaceList() {
                                        this.isLoadingList = true

                                        const response = await strawpoll.fetchAPI('/users/@me/workspaces')

                                        this.isLoadingList = false

                                        if (!response.error) {
                                            this.workspaceList = strawpoll.toCamelCaseKeys(response.data)
                                        }
                                    },
                                    async savePollWorkspace() {
                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id, {
                                            method: "PATCH",
                                            body: JSON.stringify({
                                                workspace_id: this.selectedWorkspace
                                            })
                                        })

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Successfully updated.' })
                                            this.open = false
                                            this.poll = strawpoll.toCamelCaseKeys(response)

                                            this.$dispatch('update-poll', { poll: this.poll, i: this.index })
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg',  }"
            @premium-modal.window="index = $event.detail.index; open = true" @keydown.window.escape="open = false"
            x-show="open" class="fixed z-50 inset-0 overflow-y-auto" x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 py-3 sm:px-6 sm:py-4 flex items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z" />
                                    <path fill-rule="evenodd"
                                        d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"
                                        clip-rule="evenodd" />

                                </svg>

                                <span class="ml-2">ui.modals.premium.title</span>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4 space-y-3">
                                <div class="text-sm text-gray-500 dark:text-gray-400">
                                    Choose a workspace to make your poll manageable for team members. If you do not see
                                    a workspace in the list, please create one first.
                                </div>

                                <div>
                                    <label class="label" for="workspace">
                                        Workspace
                                    </label>
                                    <select id="workspace" name="workspace" class="mt-1 select"
                                        x-model="selectedWorkspace">
                                        <option value="" disabled>Select a workspace</option>
                                        <template x-for="(workspace, i) in workspaceList">
                                            <option :value="workspace.id" x-text="workspace.name"></option>
                                        </template>
                                    </select>
                                </div>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4 flex sm:justify-end">
                                <button type="button" class="mt-0 w-full sm:w-auto button is-light"
                                    @click="open = false">
                                    Cancel
                                </button>
                                <button type="button" class="button is-primary w-full sm:w-auto button is-primary ml-3"
                                    @click="savePollWorkspace()">
                                    Save
                                </button>
                            </div>
                        </div>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-custom-link-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollCustomLink()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4 flex justify-start items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path
                                        d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                                    <path fill-rule="evenodd"
                                        d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
                                        clip-rule="evenodd" />

                                </svg>

                                <span class="ml-2">Custom poll link</span>
                            </div>
                            <div
                                class="px-4 pt-3 pb-2 sm:px-6 sm:py-5 sm:px-6 space-y-4 text-sm text-gray-700 dark:text-gray-400">
                                <div>
                                    Customize your poll link by turning the URL into an easy-to-remember and brandable
                                    link.
                                </div>

                                <div>
                                    This is a premium feature. Consider subscribing to a <a class="link"
                                        href="/pricing/" target="_blank">paid plan</a>.
                                </div>
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false">
                                    Close
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollCustomLink() {
                                return {
                                    pollSlug: null,
                                    isUpdateLinkLoading: false,
                                    updateLinkError: null,
                                    baseUrl: 'strawpoll.com/',
                                    init() {
                                        this.pollSlug = ''
                                    },
                                    async updatePollLink() {
                                        if (!this.pollSlug) {
                                            this.updateLinkError = 'Missing required data.'
                                            return
                                        }

                                        this.updateLinkError = false
                                        this.isUpdateLinkLoading = true

                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id, {
                                            method: "PATCH",
                                            body: JSON.stringify({
                                                slug: this.pollSlug
                                            })
                                        })

                                        this.isUpdateLinkLoading = false

                                        if (!response.error) {
                                            window.location.href = response.url
                                        } else {
                                            this.updateLinkError = response.error.message
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-qrcode-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="qrCodeModal()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 py-3 sm:px-6 sm:py-4 flex items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path fill-rule="evenodd"
                                        d="M3 4a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm2 2V5h1v1H5zM3 13a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1v-3zm2 2v-1h1v1H5zM13 3a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1V4a1 1 0 00-1-1h-3zm1 2v1h1V5h-1z"
                                        clip-rule="evenodd" />
                                    <path
                                        d="M11 4a1 1 0 10-2 0v1a1 1 0 002 0V4zM10 7a1 1 0 011 1v1h2a1 1 0 110 2h-3a1 1 0 01-1-1V8a1 1 0 011-1zM16 9a1 1 0 100 2 1 1 0 000-2zM9 13a1 1 0 011-1h1a1 1 0 110 2v2a1 1 0 11-2 0v-3zM7 11a1 1 0 100-2H4a1 1 0 100 2h3zM17 13a1 1 0 01-1 1h-2a1 1 0 110-2h2a1 1 0 011 1zM16 17a1 1 0 100-2h-3a1 1 0 100 2h3z" />

                                </svg>

                                <span class="ml-2">QR Code</span>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4">
                                <div class="flex justify-center">
                                    <img :src="url" alt="qr_code_modal.qr_code" />
                                </div>
                            </div>
                            <div class="px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false;">
                                    Close
                                </button>
                            </div>
                        </div>

                        <script>
                            function qrCodeModal() {
                                return {
                                    url: null,
                                    init() {
                                        this.url = 'https://cdn.strawpoll.com/images/polls/qr/' + this.poll.id + '.png'
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-embed-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollEmbed()" class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 pt-4 pb-3 sm:px-6 sm:py-4 flex justify-start items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path fill-rule="evenodd"
                                        d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />

                                </svg>

                                <span class="ml-2">Embed</span>
                            </div>
                            <div
                                class="px-4 pt-3 pb-2 sm:px-6 sm:py-4 sm:px-6 space-y-4 text-gray-700 dark:text-gray-400">
                                <div class="space-y-3">
                                    <div class="text-sm">Use the code below to embed this poll on any website.</div>
                                    <div class="text-sm">The height of the embed will be adjusted automatically. If
                                        necessary, you can change the width in the code according to your needs.</div>
                                    <div class="text-sm">Note: If the quota of free participants is exceeded, voting via
                                        embedding will be limited.</div>

                                    <div class="text-md font-medium text-gray-900 dark:text-gray-200">Settings</div>

                                    <div class="space-y-2">
                                        <div>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="hide-embed-vote-count">
                                                    <span>Hide embed vote count</span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="hide-embed-vote-count"
                                                        x-model.number="poll.pollConfig.hideEmbedVoteCount"
                                                        class="switch" role="switch" value="1" @change=""
                                                        :disabled="false" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': poll.pollConfig.hideEmbedVoteCount, 'translate-x-0': !(poll.pollConfig.hideEmbedVoteCount) }"></span>
                                                </div>

                                            </div>

                                        </div>

                                        <div>

                                            <div class="flex items-center justify-between space-x-10">
                                                <label class="label cursor-pointer w-full flex items-center space-x-1"
                                                    for="remove-strawpoll-branding">
                                                    <span>Remove StrawPoll branding</span>
                                                    <span
                                                        class="text-xs uppercase font-semibold bg-indigo-600 text-white px-2 py-1 rounded-md cursor-default">
                                                        Pro
                                                    </span>
                                                </label>

                                                <div class="relative leading-none">
                                                    <input type="checkbox" id="remove-strawpoll-branding"
                                                        x-model.number="removeBranding" class="switch" role="switch"
                                                        value="1" @change="" :disabled="true" />
                                                    <span aria-hidden="true" style="top: 2px; left: 2px;"
                                                        class="switch-button"
                                                        :class="{ 'translate-x-5': removeBranding, 'translate-x-0': !(removeBranding) }"></span>
                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                    <div class="text-md font-medium text-gray-900 dark:text-gray-200">Code</div>

                                    <textarea class="textarea mt-3" rows="4" x-model="embedCode"
                                        @click="$el.select()"></textarea>

                                    <div>
                                        <button type="button" class="button is-primary"
                                            @click="$clipboard(embedCode); $tooltip('Successfully copied.')">


                                            <svg class="h-5 w-5 -ml-1 mr-2 " xmlns="http://www.w3.org/2000/svg"
                                                fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                                <path
                                                    d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" />

                                            </svg>

                                            <span>Copy to clipboard</span>
                                        </button>
                                    </div>
                                </div>
                                <!--div x-show="poll.pollConfig.voteType === 'participant_grid'"> 
			It is currently not possible to embed a meeting poll in other websites.
		</div-->
                            </div>

                            <div class="mt-5 sm:mt-6 px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false">
                                    Close
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollEmbed() {
                                return {
                                    embedCode: null,
                                    removeBranding: false,
                                    init() {
                                        this.$watch('poll.pollConfig.hideEmbedVoteCount', (value, oldValue) => { if (value !== oldValue) { this.updatePoll(['pollConfig.hideEmbedVoteCount']) } })

                                        let title_height = 36
                                        if (this.poll.title.length > 35) {
                                            title_height = 72
                                        } else if (this.poll.title.length > 70) {
                                            title_height = 108
                                        } else if (this.poll.title.length > 105) {
                                            title_height = 144
                                        }

                                        let num_answers = this.poll.pollOptions.length

                                        if (!num_answers) {
                                            num_answers = 5
                                        }

                                        const isParticipantGrid = this.poll.pollConfig.voteType === 'participant_grid' ? 1 : 0

                                        let height = 316

                                        if (isParticipantGrid) {
                                            height += title_height + 400 * isParticipantGrid
                                        } else {
                                            height += title_height + 64 * num_answers
                                        }

                                        this.embedCode = '<div class="strawpoll-embed" id="strawpoll_' + this.poll.id + '" style="height: ' + height + 'px; max-width: 640px; width: 100%; margin: 0 auto; display: flex; flex-direction: column;">'
                                            + '<iframe title="StrawPoll Embed" id="strawpoll_iframe_' + this.poll.id + '" src="' + this.poll.embedUrl + '" style="position: static; visibility: visible; display: block; width: 100%; flex-grow: 1;" frameborder="0" allowfullscreen allowtransparency>Loading...</iframe>'
                                            // + '<div style="display:flex; justify-content: space-between; padding: 6px 8px; font-size: 14px;">'
                                            // + '<div>Not loading? <a href="' + this.poll.url + '" style="color: #4F46E5; text-decoration: underline;" target="_blank">Click here</a></div>'
                                            // + '<div style="font-style: italic;">Powered by <a href="https://strawpoll.com/" style="color: #4F46E5; text-decoration: underline;" target="_blank">StrawPoll</a></div>'
                                            // + '</div>
                                            + '<script async src="https://cdn.strawpoll.com/dist/widgets.js" charset="utf-8"><\/script></div>'
                                    },
                                    async updatePoll(keys) {
                                        let update = {}

                                        keys.forEach((key) => {
                                            const k = key.match(/^(.*?)\.(.*?)$/)
                                            if (k) {
                                                if (typeof update[k[1]] === 'undefined') update[k[1]] = {}
                                                update[k[1]][k[2]] = this.poll[k[1]][k[2]]
                                            } else {
                                                update[key] = this.poll[key]
                                            }
                                        })

                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id, {
                                            method: 'PATCH',
                                            body: JSON.stringify({
                                                poll: strawpoll.toSnakeCaseKeys(update),
                                            })
                                        })

                                        if (!response.error) {
                                            this.$store.poll.update(strawpoll.toCamelCaseKeys(response))
                                            this.$store.notification.show({ title: 'Successfully updated.' })
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>


        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-share-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>


                        <div class="divide-y divide-gray-200 dark:divide-gray-700">
                            <div class="text-md px-4 py-3 sm:px-6 sm:py-4 flex justify-start items-center">


                                <svg class="h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg"
                                    fill="currentColor" viewBox="0 0 20 20" stroke="">
                                    <path
                                        d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />

                                </svg>

                                <span class="ml-2">Share</span>
                            </div>

                            <div class="px-4 py-3 sm:px-6 sm:py-4">

                                <div x-data="{ poll: (Alpine.store('poll').id ? Alpine.store('poll') : poll), pollUrl: '' }"
                                    x-init="pollUrl = poll.url"
                                    class="space-y-6 divide-y divide-gray-200 dark:divide-gray-700">
                                    <div>
                                        <div class="mx-auto sm:max-w-md">
                                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-200">Share via
                                                link</h3>

                                            <p class="mt-1 text-gray-500 text-sm">Use this link to share the poll with
                                                your participants.</p>

                                            <div class="mt-3 flex rounded-md shadow-sm">
                                                <div class="relative flex items-stretch flex-grow focus-within:z-10">
                                                    <input type="text" name="poll-url"
                                                        class="block w-full shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm border border-gray-300 rounded-none rounded-l-md bg-white dark:bg-gray-700 dark:border-gray-700"
                                                        x-model="pollUrl" @click="$el.select()" readonly="readonly" />
                                                </div>
                                                <button type="button"
                                                    class="-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-600 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"
                                                    @click="$clipboard(pollUrl); $store.notification.show({ title: 'Successfully copied.' })">


                                                    <svg class="h-5 w-5 text-gray-400"
                                                        xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                                        viewBox="0 0 20 20" stroke="">
                                                        <path d="M8 2a1 1 0 000 2h2a1 1 0 100-2H8z" />
                                                        <path
                                                            d="M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z" />

                                                    </svg>

                                                    <span>Copy</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>


                                    <div>
                                        <div class="mx-auto sm:max-w-md pt-4">
                                            <h3 class="text-lg font-medium text-gray-900 dark:text-gray-200">Share on
                                                social media</h3>

                                            <p class="mt-1 text-gray-500 text-sm">Share this poll with friends &amp;
                                                followers on social media channels.</p>

                                            <div class="mt-3 space-y-4">
                                                <a :href="'https://api.whatsapp.com/send?text='+ poll.title +' - '+ pollUrl"
                                                    target="_blank" rel="noopener"
                                                    class="button w-full text-white space-x-2 hover:opacity-80"
                                                    style="background-color: #25D366;">
                                                    <svg class="text-white w-5 h-5" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z" />
                                                    </svg>
                                                    <span>Share on WhatsApp</span>
                                                </a>

                                                <a :href="'https://www.twitter.com/share?text='+ poll.title +'&url='+ pollUrl"
                                                    target="_blank" rel="noopener"
                                                    class="button w-full text-white space-x-2 hover:opacity-80"
                                                    style="background-color: #1da1f2;">
                                                    <svg class="text-white w-5 h-5" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" />
                                                    </svg>
                                                    <span>Share on Twitter</span>
                                                </a>

                                                <a :href="'https://www.facebook.com/sharer/sharer.php?u='+ pollUrl"
                                                    target="_blank" rel="noopener"
                                                    class="button w-full text-white space-x-2 hover:opacity-80"
                                                    style="background-color: #4267B2;">
                                                    <svg class="text-white w-5 h-5" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z" />
                                                    </svg>
                                                    <span>Share on Facebook</span>
                                                </a>

                                                <a :href="'https://www.reddit.com/submit?url='+ pollUrl +'&title='+ poll.title +' - StrawPoll'"
                                                    target="_blank" rel="noopener"
                                                    class="button w-full text-white space-x-2 hover:opacity-80"
                                                    style="background-color: #ff4500;">
                                                    <svg class="text-white w-5 h-5" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 24 24" fill="currentColor">
                                                        <path
                                                            d="M24 11.779c0-1.459-1.192-2.645-2.657-2.645-.715 0-1.363.286-1.84.746-1.81-1.191-4.259-1.949-6.971-2.046l1.483-4.669 4.016.941-.006.058c0 1.193.975 2.163 2.174 2.163 1.198 0 2.172-.97 2.172-2.163s-.975-2.164-2.172-2.164c-.92 0-1.704.574-2.021 1.379l-4.329-1.015c-.189-.046-.381.063-.44.249l-1.654 5.207c-2.838.034-5.409.798-7.3 2.025-.474-.438-1.103-.712-1.799-.712-1.465 0-2.656 1.187-2.656 2.646 0 .97.533 1.811 1.317 2.271-.052.282-.086.567-.086.857 0 3.911 4.808 7.093 10.719 7.093s10.72-3.182 10.72-7.093c0-.274-.029-.544-.075-.81.832-.447 1.405-1.312 1.405-2.318zm-17.224 1.816c0-.868.71-1.575 1.582-1.575.872 0 1.581.707 1.581 1.575s-.709 1.574-1.581 1.574-1.582-.706-1.582-1.574zm9.061 4.669c-.797.793-2.048 1.179-3.824 1.179l-.013-.003-.013.003c-1.777 0-3.028-.386-3.824-1.179-.145-.144-.145-.379 0-.523.145-.145.381-.145.526 0 .65.647 1.729.961 3.298.961l.013.003.013-.003c1.569 0 2.648-.315 3.298-.962.145-.145.381-.144.526 0 .145.145.145.379 0 .524zm-.189-3.095c-.872 0-1.581-.706-1.581-1.574 0-.868.709-1.575 1.581-1.575s1.581.707 1.581 1.575-.709 1.574-1.581 1.574z" />
                                                    </svg>
                                                    <span>Share on Reddit</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="mx-auto sm:max-w-md pt-4">
                                            <h3
                                                class="text-lg font-medium text-gray-900 dark:text-gray-200 sm:flex sm:items-center sm:justify-between">
                                                <span>Share with live audience</span>
                                            </h3>

                                            <p class="mt-1 text-gray-500 text-sm">Easy access for your live audience
                                                while sharing your screen.</p>

                                            <div class="mt-3 space-y-4">
                                                <button type="button"
                                                    @click="$dispatch('poll-qrcode-modal', { poll: poll })"
                                                    class="button bg-purple-500 text-white w-full space-x-2 hover:opacity-80">


                                                    <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                        <path fill-rule="evenodd"
                                                            d="M3 4a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm2 2V5h1v1H5zM3 13a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1H4a1 1 0 01-1-1v-3zm2 2v-1h1v1H5zM13 3a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1V4a1 1 0 00-1-1h-3zm1 2v1h1V5h-1z"
                                                            clip-rule="evenodd" />
                                                        <path
                                                            d="M11 4a1 1 0 10-2 0v1a1 1 0 002 0V4zM10 7a1 1 0 011 1v1h2a1 1 0 110 2h-3a1 1 0 01-1-1V8a1 1 0 011-1zM16 9a1 1 0 100 2 1 1 0 000-2zM9 13a1 1 0 011-1h1a1 1 0 110 2v2a1 1 0 11-2 0v-3zM7 11a1 1 0 100-2H4a1 1 0 100 2h3zM17 13a1 1 0 01-1 1h-2a1 1 0 110-2h2a1 1 0 011 1zM16 17a1 1 0 100-2h-3a1 1 0 100 2h3z" />

                                                    </svg>

                                                    <span>Show QR Code</span>
                                                </button>

                                                <button
                                                    class="button bg-amber-500 text-white w-full space-x-2 hover:opacity-80"
                                                    @click="$dispatch('poll-pincode-modal', { poll: poll })">


                                                    <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg"
                                                        fill="currentColor" viewBox="0 0 20 20" stroke="">
                                                        <path fill-rule="evenodd"
                                                            d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11 4a1 1 0 10-2 0v4a1 1 0 102 0V7zm-3 1a1 1 0 10-2 0v3a1 1 0 102 0V8zM8 9a1 1 0 00-2 0v2a1 1 0 102 0V9z"
                                                            clip-rule="evenodd" />

                                                    </svg>

                                                    <span>Generate PIN Code</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="px-4 py-3 sm:px-6 sm:py-4">
                                <button type="button" class="button is-light w-full" @click="open = false;">
                                    Close
                                </button>
                            </div>
                        </div>

                        <!--template x-if="open"><div x-data="mobileShare()"></div></template-->

                        <script>
                            function mobileShare() {
                                return {
                                    init() {
                                        if (navigator.share && DEVICE_TYPE == 'mobile') {
                                            navigator.share({
                                                title: this.poll.title,
                                                url: '' + this.poll.path
                                            }).then(() => {
                                                this.$dispatch('notification', { title: 'Successfully shared.' })
                                            })
                                                .catch(console.error)

                                            this.$nextTick(() => { this.open = false })
                                        }
                                    }
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>

        <div x-data="{ open: false, index: 0, maxWidth: 'max-w-lg', poll: null }"
            @poll-report-modal.window="poll = JSON.parse(JSON.stringify($event.detail.poll)); index = $event.detail.index; open = true"
            @keydown.window.escape="open = false" x-show="open" class="fixed z-50 inset-0 overflow-y-auto"
            x-ref="dialog" aria-modal="true" x-cloak>
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div x-show="open" class="fixed z-40 inset-0 bg-gray-500 dark:bg-gray-900 opacity-80"
                    @click="open = false" aria-hidden="true" x-cloak>
                </div>

                <!-- This element is to trick the browser into centering the modal contents. -->
                <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true"></span>

                <template x-if="open">
                    <div x-trap="open"
                        class="relative z-50 inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-visible shadow-xl my-8 flex-grow sm:align-middle sm:w-full"
                        :class="maxWidth">
                        <div class="absolute top-0 right-0 pt-4 pr-4">
                            <button type="button"
                                class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 "
                                @click="open = false">
                                <span class="sr-only">Close</span>


                                <svg class="h-6 w-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />

                                </svg>

                            </button>
                        </div>

                        <div x-data="pollReport()" class="px-4 pt-5 pb-4 sm:p-6">
                            <div class="sm:flex sm:items-start">
                                <div
                                    class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                                    <svg class="h-6 w-6 text-red-600" x-description="Heroicon name: outline/exclamation"
                                        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                        stroke="currentColor" aria-hidden="true">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z">
                                        </path>
                                    </svg>
                                </div>
                                <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left flex-grow">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-200"
                                        id="modal-title">
                                        Report content
                                    </h3>
                                    <div class="mt-2">
                                        <p class="text-sm text-gray-500">
                                            Please enter a reason for your report:
                                        </p>
                                        <textarea class="mt-2 textarea" x-model="reason" rows="3"
                                            @focus="error = null"></textarea>
                                    </div>

                                    <div x-show="error" class="mt-1 text-red-500 text-sm">
                                        <span x-text="error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
                                <button type="button"
                                    class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"
                                    @click="reportPoll();">
                                    Report
                                </button>
                                <button type="button"
                                    class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
                                    @click="open = false">
                                    Cancel
                                </button>
                            </div>
                        </div>

                        <script>
                            function pollReport() {
                                return {
                                    reason: null,
                                    error: null,
                                    async reportPoll() {
                                        this.error = null

                                        if (!this.reason || this.reason.length < 20) {
                                            this.error = 'Please enter a reason for your report (mininum 20 characters).'
                                            return
                                        }

                                        const response = await strawpoll.fetchAPI('/polls/' + this.poll.id + '/report', {
                                            method: 'POST',
                                            body: JSON.stringify({ reason: this.reason })
                                        })

                                        if (!response.error) {
                                            this.$store.notification.show({ title: 'Thank you for your report.' })
                                            this.open = false
                                        }
                                    },
                                }
                            }
                        </script>

                    </div>
                </template>
            </div>
        </div>





    </div>



    <div x-data aria-live="assertive"
        class="fixed z-50 top-16 inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start">
        <div class="w-full flex flex-col items-center space-y-4 sm:items-end">
            <div x-show="$store.notification.open" x-transition:enter="transform ease-out duration-300 transition"
                x-transition:enter-start="translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2"
                x-transition:enter-end="translate-y-0 opacity-100 sm:translate-x-0"
                x-transition:leave="transition ease-in duration-100" x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                class="max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-gray-300 dark:ring-gray-700 overflow-hidden"
                aria-hidden="true" x-cloak>
                <div class="p-4">
                    <div class="flex items-start">
                        <div class="flex-shrink-0" x-show="$store.notification.type === 'success'">


                            <svg class="h-6 w-6 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />

                            </svg>

                        </div>
                        <div class="flex-shrink-0" x-show="$store.notification.type === 'error'">


                            <svg class="h-6 w-6 text-red-400" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />

                            </svg>

                        </div>
                        <div class="ml-3 w-0 flex-1 pt-0.5">
                            <p class="text-sm font-medium text-gray-900" x-text="$store.notification.title"></p>
                            <p class="mt-1 text-sm text-gray-500" x-text="$store.notification.description" x-cloak></p>
                        </div>
                        <div class="ml-4 flex-shrink-0 flex">
                            <button @click="$store.notification.hide()"
                                class="bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                <span class="sr-only">Close</span>


                                <svg class="h-5 w-5 " xmlns="http://www.w3.org/2000/svg" fill="currentColor"
                                    viewBox="0 0 20 20" stroke="">
                                    <path fill-rule="evenodd"
                                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                        clip-rule="evenodd" />

                                </svg>

                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script>
        function global() {
            return {
                isAdmin: true,
                isMobileView: false,
                expandBox: false,
                init() {
                    let width = (window.innerWidth > 0) ? window.innerWidth : screen.width
                    if (width < 769) {
                        this.isMobileView = true
                    }

                    this.$store.meta.update({
                        availableLanguages: ['en', 'de', 'fr', 'es', 'pt'],
                        displayLang: "en",
                        csrfToken: "895f61fc81fac78ec9de1bb31575825e7fc6bf9e",
                    })
                    this.$store.user.update(strawpoll.toCamelCaseKeys({ "api_key": null, "avatar_path": "\/images\/users\/avatars\/brevity-NMnQp7jGy6Y.png", "created_at": 1736386048, "displayname": "Brevity", "email": "brevity51@gmail.com", "email_canonical": "brevity51@gmail.com", "id": "7MZ0ReMKnom", "status": "active", "subscription": "free", "trusted": 0, "user_config": { "active_poll_slug": null, "appearance": "auto", "clock_type": "12h", "default_theme_id": null, "default_workspace_id": null, "first_day_of_week": 0, "language": "en", "locale": "en-US", "notification_delay": 30, "notify_deadline": false, "notify_meeting_vote": true, "notify_poll_vote": false, "timezone": "America\/Los_Angeles" }, "user_meta": { "about": null, "adfree_participants_quota": 0, "adfree_participants_remaining": 0, "adfree_participants_used": 0, "allow_active_vanity_url": false, "allow_clickable_links": false, "allow_custom_email_subject": false, "allow_custom_poll_links": false, "allow_custom_themes": false, "allow_image_upload": true, "allow_priority_support": false, "allow_remove_ads": false, "allow_remove_branding": false, "allow_theme_logo": false, "country_code": "ng", "embed_views_quota": 1000, "embed_views_used": 0, "has_webhooks": false, "has_workspaces": false, "invites_quota": 50, "invites_remaining": 50, "invites_used": 0, "monthly_points": 1, "pending_email": null, "total_points": 1, "website": null, "workspace_members_quota": 0, "workspace_members_used": 0, "workspaces_quota": 0, "workspaces_used": 0 }, "username": "brevity" }))
                    this.$store.poll.update(strawpoll.toCamelCaseKeys({ "cached_at": 1736669629, "created_at": 1736401717, "embed_url": "https:\/\/strawpoll.com\/embed\/Q0Zp7VrbAgM", "group": null, "id": "Q0Zp7VrbAgM", "media": { "created_at": 1736595816, "height": 386, "id": "w4nWVAQWyAL", "path": "\/images\/polls\/covers\/w4nWVAQWyAL-c.png", "type": "image", "updated_at": 1736595816, "url": "https:\/\/cdn.strawpoll.com\/images\/polls\/covers\/w4nWVAQWyAL-c.png", "width": 686 }, "path": "\/Q0Zp7VrbAgM", "pin_code": null, "poll_config": { "allow_comments": false, "allow_indeterminate": false, "allow_other_option": false, "allow_vpn_users": true, "block_vpn_users": false, "deadline_at": null, "duplication_checking": "ip", "edit_vote_permissions": "nobody", "force_appearance": null, "hide_absolute_numbers": false, "hide_embed_vote_count": false, "hide_other_option_results": false, "hide_participants": false, "hide_share_button": false, "hide_unavailable_options": false, "is_multiple_choice": true, "is_private": true, "layout": "drag", "max_points": 11, "multiple_choice_max": 1, "multiple_choice_min": 1, "number_of_winners": 1, "open_at": null, "randomize_options": false, "require_captcha": false, "require_voter_account": false, "require_voter_names": false, "results_visibility": "hidden", "show_write_in_options": false, "strict_checking": false, "vote_type": "default", "voting_interval": 60 }, "poll_meta": { "comment_count": 0, "creator_country": "ng", "description": "Cast your votes for the most talented stars in the Arabs Got Talent Season 7! Support your favorite acts in categories like singing, dancing, comedy, magic, and more. Every vote takes them one step closer to becoming the champion—your voice makes the difference!\n\nVoting ends soon. Don’t miss your chance to make it count!", "last_vote_at": 1736401969, "location": null, "participant_count": 1, "pin_code_expired_at": null, "required": 1, "timezone": null, "view_count": 48, "vote_count": 1 }, "poll_options": [{ "description": null, "has_votes": false, "id": "7MZ0OvKrBgo", "is_write_in": false, "max_votes": 0, "position": 0, "type": "text", "uuid": "5f35b65c-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #1", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "2ayL9oNwbn4", "is_write_in": false, "max_votes": 0, "position": 1, "type": "text", "uuid": "5f36b278-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #2", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "LVyKRQo4bZ0", "is_write_in": false, "max_votes": 0, "position": 2, "type": "text", "uuid": "5f37053e-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #3", "vote_count": 0 }, { "description": null, "has_votes": true, "id": "X3nkaNo1YZE", "is_write_in": false, "max_votes": 0, "position": 3, "type": "text", "uuid": "5f374cb0-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #4", "vote_count": 1 }, { "description": null, "has_votes": false, "id": "XOgOBPGo4n3", "is_write_in": false, "max_votes": 0, "position": 4, "type": "text", "uuid": "5f3791c0-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #5", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "ajnEPlp7AyW", "is_write_in": false, "max_votes": 0, "position": 5, "type": "text", "uuid": "5f37db94-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #6", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "e7ZJP5QjLn3", "is_write_in": false, "max_votes": 0, "position": 6, "type": "text", "uuid": "5f3820d6-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #7", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "40ZmWPvGRna", "is_write_in": false, "max_votes": 0, "position": 7, "type": "text", "uuid": "5f3879d2-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #8", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "7rnzJzE3DnO", "is_write_in": false, "max_votes": 0, "position": 8, "type": "text", "uuid": "5f38cf04-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #9", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "e2najY7blgB", "is_write_in": false, "max_votes": 0, "position": 9, "type": "text", "uuid": "5f3929ea-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #10", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "e6Z2JGKd6ZN", "is_write_in": false, "max_votes": 0, "position": 10, "type": "text", "uuid": "5f396964-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #11", "vote_count": 0 }, { "description": null, "has_votes": false, "id": "w4nWm1BblZA", "is_write_in": false, "max_votes": 0, "position": 11, "type": "text", "uuid": "5f39abcc-ce4d-11ef-8ef7-f8bc91717338", "value": "Vote Contestant #12", "vote_count": 0 }], "reset_at": null, "results_path": "\/Q0Zp7VrbAgM\/results", "slug": null, "status": "published", "theme": null, "title": "Arabs Got Talent Season 7", "type": "ranking", "updated_at": 1736628822, "url": "https:\/\/strawpoll.com\/Q0Zp7VrbAgM", "user": { "avatar_path": "\/images\/users\/avatars\/brevity-NMnQp7jGy6Y.png", "created_at": 1736386048, "displayname": "Brevity", "id": "7MZ0ReMKnom", "subscription": "free", "trusted": 0, "user_meta": { "about": null, "adfree_participants_remaining": 0, "country_code": "ng", "invites_remaining": 50, "monthly_points": 1, "total_points": 1, "website": null }, "username": "brevity" }, "version": "24798d32-d05e-11ef-b6da-931e9e717338", "workspace": null }))
                    this.$store.pollUser.update({ isAdmin: true })
                    this.$store.pollResults.update(strawpoll.toCamelCaseKeys({}))



                    dayjs.locale(strawpoll.getLanguage())
                },
            }
        }

        localStorage.setItem('settings/last_keepalive', (new Date()).getTime())

        setInterval(keepAlive, 300000)

        async function keepAlive() {
            let setting = localStorage.getItem('settings/last_keepalive')
            let now = new Date().getTime()
            if (!setting || setting < now - 290000) {
                await fetch('https://strawpoll.com' + '/api/refresh')
                localStorage.setItem('settings/last_keepalive', (new Date()).getTime())
            }
        }

        document.addEventListener("visibilitychange", () => {
            if (document.visibilityState === 'visible') {
                keepAlive()
            }
        })
    </script>

</body>

</html>
